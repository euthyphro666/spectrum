(function(t){function e(e){for(var n,r,c=e[0],o=e[1],A=e[2],l=0,h=[];l<c.length;l++)r=c[l],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&h.push(i[r][0]),i[r]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);u&&u(e);while(h.length)h.shift()();return s.push.apply(s,A||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,c=1;c<a.length;c++){var o=a[c];0!==i[o]&&(n=!1)}n&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},i={app:0},s=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var A=0;A<c.length;A++)e(c[A]);var u=o;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},"02c5":function(t,e,a){"use strict";var n=a("7a1d"),i=a.n(n);i.a},"034f":function(t,e,a){"use strict";var n=a("85ec"),i=a.n(n);i.a},"0877":function(t,e,a){},"1bc2":function(t,e,a){},"1d99":function(t,e,a){"use strict";var n=a("9988"),i=a.n(n);i.a},"1f31":function(t,e,a){},"20c3":function(t,e,a){},"2e73":function(t,e,a){},"320e":function(t,e,a){"use strict";var n=a("e8d8"),i=a.n(n);i.a},"37bc":function(t,e,a){"use strict";var n=a("abe6"),i=a.n(n);i.a},"46ed":function(t,e,a){"use strict";var n=a("1bc2"),i=a.n(n);i.a},"4c7b":function(t,e,a){"use strict";var n=a("762a"),i=a.n(n);i.a},"5c05":function(t,e,a){"use strict";var n=a("20c3"),i=a.n(n);i.a},6508:function(t,e,a){},"681a":function(t,e,a){"use strict";var n=a("6f75"),i=a.n(n);i.a},"6dc4":function(t,e,a){"use strict";var n=a("cbc2"),i=a.n(n);i.a},"6f75":function(t,e,a){},7529:function(t,e,a){"use strict";var n=a("6508"),i=a.n(n);i.a},"762a":function(t,e,a){},"7a1d":function(t,e,a){},"7fb9":function(t,e,a){"use strict";var n=a("9710"),i=a.n(n);i.a},"85ec":function(t,e,a){},"89b9":function(t,e,a){"use strict";var n=a("b2f8"),i=a.n(n);i.a},9710:function(t,e,a){},9988:function(t,e,a){},"9aad":function(t,e,a){"use strict";var n=a("ae2e"),i=a.n(n);i.a},abe6:function(t,e,a){},ae2e:function(t,e,a){},b2f8:function(t,e,a){},bf2f:function(t,e,a){"use strict";var n=a("1f31"),i=a.n(n);i.a},cbc2:function(t,e,a){},cd49:function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"app"}},[a("router-view"),a("div",{attrs:{id:"version"}},[t._v("Alpha")])],1)},s=[],r=a("d4ec"),c=a("99de"),o=a("7e84"),A=a("262e"),u=a("9ab4"),l=a("60a3"),h=function(t){function e(){return Object(r["a"])(this,e),Object(c["a"])(this,Object(o["a"])(e).apply(this,arguments))}return Object(A["a"])(e,t),e}(l["c"]);h=u["a"]([Object(l["a"])({name:"App",components:{}})],h);var d=h,m=d,p=(a("034f"),a("2877")),v=Object(p["a"])(m,i,s,!1,null,null,null),f=v.exports,b=a("8c4f"),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("div",{staticClass:"master-selection",on:{click:function(e){return t.onSelection("/selection")}}},[a("h1",[t._v("Game Master")])]),a("div",{staticClass:"player-selection",on:{click:function(e){return t.onSelection("/session")}}},[a("h1",[t._v("Player")])]),a("div",{staticClass:"spectator-selection",on:{click:function(e){return t.onSelection("/session")}}},[a("h1",[t._v("Spectator")])]),a("DialogueBox",{attrs:{title:"Welcome",message:"Spectrum is currently in alpha. Expect things to break or not work in the first place. If you have any suggestions or feedback feel free to email joshhess13@gmail.com.",hidden:t.showDialogue},on:{confirmed:t.onDialogue}})],1)},y=[],C=a("bee2"),O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dialogue-background",class:{hidden:t.hidden}},[a("div",{staticClass:"dialogue-box"},[a("h1",[t._v(t._s(t.title))]),a("h2",[t._v(t._s(t.message))]),a("div",{staticClass:"dialogue-button",on:{click:function(e){t.hidden=!0,t.$emit("confirmed")}}},[a("h2",[t._v("Confirm")])])])])},k=[],j=function(t){function e(){return Object(r["a"])(this,e),Object(c["a"])(this,Object(o["a"])(e).apply(this,arguments))}return Object(A["a"])(e,t),e}(l["c"]);u["a"]([Object(l["b"])()],j.prototype,"title",void 0),u["a"]([Object(l["b"])()],j.prototype,"message",void 0),u["a"]([Object(l["b"])()],j.prototype,"hidden",void 0),j=u["a"]([Object(l["a"])({name:"DialogueBox",components:{}})],j);var x=j,w=x,E=(a("7fb9"),Object(p["a"])(w,O,k,!1,null,"1bc51bde",null)),I=E.exports,S=function(t){function e(){var t;return Object(r["a"])(this,e),t=Object(c["a"])(this,Object(o["a"])(e).apply(this,arguments)),t.showDialogue=!1,t}return Object(A["a"])(e,t),Object(C["a"])(e,[{key:"mounted",value:function(){this.showDialogue=this.$store.state.welcomeMessage}},{key:"onDialogue",value:function(){this.$store.state.welcomeMessage=!0,this.showDialogue=!0}},{key:"onSelection",value:function(t){this.$router.push(t)}}]),e}(l["c"]);S=u["a"]([Object(l["a"])({name:"Home",components:{DialogueBox:I}})],S);var _=S,T=_,M=(a("d017"),Object(p["a"])(T,g,y,!1,null,"44f29690",null)),B=M.exports,Q=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},D=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about"},[a("h1",[t._v("This is an about page")])])}],L={},R=Object(p["a"])(L,Q,D,!1,null,null,null),F=R.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"master"},[a("InfoBar",{attrs:{title:"Maps",subtitle:"Example Campaign"}}),a("div",{staticClass:"content"},[t._m(0),a("div",{staticClass:"templates"},t._l(t.templates,(function(e){return a("TemplateCard",{key:e.id,attrs:{title:e.name,thumbnail:e.thumbnail},on:{load:function(a){return t.load(e)}}})})),1),t._m(1),a("div",{staticClass:"body"},t._l(t.maps,(function(e){return a("MapCard",{key:e.id,attrs:{title:e.name,thumbnail:e.thumbnail},on:{load:function(a){return t.load(e)}}})})),1)])],1)},N=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"template-header"},[a("h1",[t._v("Start a new map")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"body-header"},[a("h1",[t._v("Recent maps")])])}],P=(a("b0c0"),a("96cf"),a("1da1")),q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"info-bar"},[a("h1",{staticClass:"left"},[t._v(t._s(t.title))]),a("div",{staticClass:"search"},[t._v(t._s(t.search))]),a("h1",{staticClass:"right"},[t._v(t._s(t.subtitle))])])},J=[],U=(a("ac1f"),a("841c"),function(t){function e(){var t;return Object(r["a"])(this,e),t=Object(c["a"])(this,Object(o["a"])(e).apply(this,arguments)),t.search="Search",t}return Object(A["a"])(e,t),e}(l["c"]));U=u["a"]([Object(l["a"])({name:"InfoBar",components:{},props:{title:String,subtitle:String}})],U);var G=U,Y=G,z=(a("d1f0"),Object(p["a"])(Y,q,J,!1,null,"cec287b6",null)),K=z.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"map-card",on:{click:function(e){return t.$emit("load")}}},[a("div",{staticClass:"thumb"},[a("img",{attrs:{src:t.thumbnail,alt:t.title}})]),a("h1",[t._v(t._s(t.title))])])},V=[],W=function(t){function e(){return Object(r["a"])(this,e),Object(c["a"])(this,Object(o["a"])(e).apply(this,arguments))}return Object(A["a"])(e,t),e}(l["c"]);W=u["a"]([Object(l["a"])({name:"MapCard",components:{},props:{title:String,thumbnail:String}})],W);var Z=W,X=Z,tt=(a("681a"),Object(p["a"])(X,H,V,!1,null,"13dd004e",null)),et=tt.exports,at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"template-card",on:{click:function(e){return t.$emit("load")}}},[a("div",{staticClass:"thumb"},[a("img",{attrs:{src:t.thumbnail,alt:t.title}})]),a("h1",[t._v(t._s(t.title))])])},nt=[],it=function(t){function e(){return Object(r["a"])(this,e),Object(c["a"])(this,Object(o["a"])(e).apply(this,arguments))}return Object(A["a"])(e,t),e}(l["c"]);it=u["a"]([Object(l["a"])({name:"TemplateCard",components:{},props:{title:String,thumbnail:String}})],it);var st=it,rt=st,ct=(a("89b9"),Object(p["a"])(rt,at,nt,!1,null,"e4a21486",null)),ot=ct.exports,At=a("bc3a"),ut=a.n(At),lt=function(t){function e(){var t;return Object(r["a"])(this,e),t=Object(c["a"])(this,Object(o["a"])(e).apply(this,arguments)),t.templates=[],t.maps=[],t}return Object(A["a"])(e,t),Object(C["a"])(e,[{key:"mounted",value:function(){var t=Object(P["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.requestMaps("Example").then((function(){return e.requestTemplates()})).catch((function(t){console.log("[ Master ] Error:${error}")}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"requestMaps",value:function(){var t=Object(P["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("[ Master ] Requesting maps for group ".concat(e,".")),t.prev=1,t.next=4,ut.a.get("/requestMaps",{params:{groupId:e}});case 4:a=t.sent,a.data&&a.data.maps&&(this.maps=a.data.maps),t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](1);case 10:case"end":return t.stop()}}),t,this,[[1,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"requestTemplates",value:function(){var t=Object(P["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ut.a.get("/requestTemplates");case 3:e=t.sent,console.log("[ Master ] Got request templates. ".concat(JSON.stringify(e.data))),e.data&&e.data.templates&&(this.templates=e.data.templates),t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"load",value:function(t){console.log("[ Master ] Got load template request for ".concat(t.name,".")),this.$store.state.currentMap=t,this.$router.push("editor")}}]),e}(l["c"]);lt=u["a"]([Object(l["a"])({name:"Master",components:{InfoBar:K,MapCard:et,TemplateCard:ot}})],lt);var ht=lt,dt=ht,mt=(a("37bc"),Object(p["a"])(dt,$,N,!1,null,"37c80644",null)),pt=mt.exports,vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"player"})},ft=[],bt=function(t){function e(){return Object(r["a"])(this,e),Object(c["a"])(this,Object(o["a"])(e).apply(this,arguments))}return Object(A["a"])(e,t),e}(l["c"]);bt=u["a"]([Object(l["a"])({name:"Player",components:{}})],bt);var gt=bt,yt=gt,Ct=(a("9aad"),Object(p["a"])(yt,vt,ft,!1,null,"6641f362",null)),Ot=Ct.exports,kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"spectator"})},jt=[],xt=function(t){function e(){return Object(r["a"])(this,e),Object(c["a"])(this,Object(o["a"])(e).apply(this,arguments))}return Object(A["a"])(e,t),e}(l["c"]);xt=u["a"]([Object(l["a"])({name:"Spectator",components:{}})],xt);var wt=xt,Et=wt,It=(a("5c05"),Object(p["a"])(Et,kt,jt,!1,null,"600f29fe",null)),St=It.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"editor"},[a("MapCanvas"),a("TabBar")],1)},Tt=[],Mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"root"},[a("canvas",{ref:"map-canvas",staticClass:"screen"})])},Bt=[],Qt=(a("d81d"),a("4c53"),function(){function t(){Object(r["a"])(this,t),this.x=0,this.y=0,this.s=1}return Object(C["a"])(t,[{key:"move",value:function(t,e){this.x+=t/this.s,this.y+=e/this.s}},{key:"zoom",value:function(t){this.s+=t,this.s<.5?this.s=.5:this.s>10&&(this.s=10)}}]),t}()),Dt=Qt,Lt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(r["a"])(this,t),this.x=e,this.y=a}return Object(C["a"])(t,[{key:"add",value:function(t,e){return this.x+=t,this.y+=e,this}},{key:"addV",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"sub",value:function(t,e){return this.x-=t,this.y-=e,this}},{key:"subV",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:"multiply",value:function(t){return this.x*=t,this.y*=t,this}},{key:"divide",value:function(t){return this.x/=t,this.y/=t,this}},{key:"floorDivide",value:function(t){return this.x=Math.floor(this.x/t),this.y=Math.floor(this.y/t),this}}]),t}(),Rt=Lt,Ft=function(){function t(){Object(r["a"])(this,t),this.camera=new Dt}return Object(C["a"])(t,[{key:"begin",value:function(t){this.context=t,this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height),this.context.strokeStyle="#e4f03d",this.context.lineWidth=3,this.context.beginPath()}},{key:"end",value:function(){this.context&&this.context.stroke(),this.context=void 0}},{key:"renderTile",value:function(e){this.context?this.context.drawImage(e.sprite,(e.x*t.TILE_SIZE+this.camera.x)*this.camera.s,(e.y*t.TILE_SIZE+this.camera.y)*this.camera.s,t.TILE_SIZE*this.camera.s,t.TILE_SIZE*this.camera.s):console.log("[ Screen ] Begin has not been called yet this frame.")}},{key:"renderTileOutline",value:function(e,a){var n=new Rt(0,0);return this.context?this.context.rect(e,a,t.TILE_SIZE*this.camera.s,t.TILE_SIZE*this.camera.s):console.log("[ Screen ] Begin has not been called yet this frame."),n}},{key:"screenToWorldSpace",value:function(t){return t.divide(this.camera.s).sub(this.camera.x,this.camera.y)}},{key:"worldToScreenSpace",value:function(t){return t.divide(this.camera.s).sub(this.camera.x,this.camera.y)}},{key:"screenToIndexSpace",value:function(e){return e.divide(this.camera.s).sub(this.camera.x,this.camera.y).floorDivide(t.TILE_SIZE)}},{key:"indexToScreenSpace",value:function(e){return e.multiply(t.TILE_SIZE).add(this.camera.x,this.camera.y).multiply(this.camera.s)}}]),t}();Ft.TILE_SIZE=64;var $t=function(){function t(){Object(r["a"])(this,t),this.hasFocus=!1,this.upPressed=!1,this.downPressed=!1,this.leftPressed=!1,this.rightPressed=!1,this.panPressed=!1,this.clickDown=!1,this.mdx=0,this.mdy=0,this.mlx=0,this.mly=0,this.ds=0,this.mx=0,this.my=0}return Object(C["a"])(t,[{key:"setFocus",value:function(t){this.hasFocus=t,this.hasFocus||(this.hasFocus=!1,this.upPressed=!1,this.downPressed=!1,this.leftPressed=!1,this.rightPressed=!1,this.panPressed=!1,this.clickDown=!1,this.mdx=0,this.mdy=0,this.mlx=0,this.mly=0,this.ds=0,this.mx=0,this.my=0)}},{key:"getClick",value:function(){return this.clickDown}},{key:"update",value:function(t,e){if(this.hasFocus){var a=5,n=this.leftPressed?this.rightPressed?0:-a:this.rightPressed?a:0,i=this.upPressed?this.downPressed?0:-a:this.downPressed?a:0;n+=this.mdx,i+=this.mdy,this.mdx=0,this.mdy=0,e.move(-n,-i),e.zoom(this.ds),this.ds=0}}},{key:"registerEvents",value:function(){document.addEventListener("keydown",this.onKeyDown.bind(this),{passive:!0}),document.addEventListener("keyup",this.onKeyUp.bind(this),{passive:!0}),document.addEventListener("mousedown",this.onMouseDown.bind(this),{passive:!0}),document.addEventListener("mousemove",this.onMouseMove.bind(this),{passive:!0}),document.addEventListener("mouseup",this.onMouseUp.bind(this),{passive:!0}),document.addEventListener("wheel",this.onScroll.bind(this),{passive:!0})}},{key:"unRegisterEvents",value:function(){document.removeEventListener("keydown",this.onKeyDown.bind(this)),document.removeEventListener("keyup",this.onKeyUp.bind(this))}},{key:"onKeyDown",value:function(t){this.hasFocus&&(65===t.keyCode||37===t.keyCode?this.leftPressed=!0:87===t.keyCode||38===t.keyCode?this.upPressed=!0:83===t.keyCode||40===t.keyCode?this.downPressed=!0:68!==t.keyCode&&39!==t.keyCode||(this.rightPressed=!0))}},{key:"onKeyUp",value:function(t){this.hasFocus&&(65===t.keyCode||37===t.keyCode?this.leftPressed=!1:87===t.keyCode||38===t.keyCode?this.upPressed=!1:83===t.keyCode||40===t.keyCode?this.downPressed=!1:68!==t.keyCode&&39!==t.keyCode||(this.rightPressed=!1))}},{key:"onMouseDown",value:function(t){this.hasFocus&&((t.shiftKey||1===t.button)&&(this.panPressed=!0,this.mlx=t.screenX,this.mly=t.screenY),1!=t.button&&(this.clickDown=!0))}},{key:"onMouseMove",value:function(t){this.hasFocus&&(this.mx=t.clientX,this.my=t.clientY,this.panPressed&&(this.mdx+=this.mlx-t.screenX,this.mdy+=this.mly-t.screenY,this.mlx=t.screenX,this.mly=t.screenY))}},{key:"onMouseUp",value:function(t){this.hasFocus&&(this.panPressed=!1,this.clickDown=!1)}},{key:"onScroll",value:function(t){this.hasFocus&&(this.ds-=t.deltaY/1e3)}}]),t}(),Nt=$t;function Pt(t,e,a){return t.tiles[a*t.width+e]}function qt(t,e,a,n){t.tiles[a*t.width+e]=n}function Jt(){return{discriminator:"spectrum.map",id:"d10c2776-cc1b-402f-b87c-46da711c4da6",name:"Sample Map",campaign:"ce9116b1-bad9-4469-b67f-b770eb6db1d1",dateModified:new Date(1577862e6),thumbnail:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAsTAAALEwEAmpwYAAABcVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATWVroAAAAenRSTlMAAQIDBAUGBwgJCwwNDxAREhQVFhcZGhseHyAhIiUmJygtLzA1Nzg9P0FGSEpQUlRbXF9lZ2hqbnFzdXZ8foCDiYqMjo+VlpecoKKpq62us7W3uL2+wMPHyczP0NHU1dbY3N3e4OLj5Obo6ert7u/y8/X29/n6+/z9/l5G4FoAAAInSURBVHja7dxXVxRBEIbhWlfEJRhACYJiQEAFBCQZAROyJhQURdRdSSaQpLj167mnLmUGqny/H1A9z/Q53VOn57TInub0J000klIaixoCcm5RQ0AufNMQkNafGgLS/ktDQK6uawhI15aGgPT80RCQG381BGRYNQTkrsaAjGkISOaRhoBkJxIeMiVI2TMNATk6qSEgldMaAnJsRkNAamY1BKTus4aAnPmiISAtS7ufvOQScvG7mYIBj5DLK8YxJA4hHWvGcUscQq5tGMcdcQjptu35iDiE9G4bx6g4hPSXjOOhOITctFvfY3EIuWcdTzIOIfetI39I3EEy49bxNCvuINm8dbw4LO4gR55bx8sycQfJvbKO1+XiDlL1xjqmcuIOcvyddbytEHeQ2jnrmKkSd5D6gnW8rxZ3kOZ56/hwQtxBzi9bx8eT4g5y6Yd1FE6JO0jbqnUU68Qd5Iptz3WhQdxBOjetY6lJ3EGu/7aOr2fFHaRve/8Pyfai6mBJQ0BuH4hjy3+vOqIxIA80CESBAAECBAgQIKn9JwUECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAOaBvAggQIECAAAECBAgQIECAAPl/IYmOBQQIECBAgAABAgQIECBAgAAB4hCyD5cqAQECBAgQIECAAAHCZzwQIECAAAECBAgQIECcQJJthYAAAQLEFyTFtR0IECBAgJDY2QGtwG+USmY7swAAAABJRU5ErkJggg==",height:16,width:16,tiles:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}}var Ut=function(){function t(e){Object(r["a"])(this,t),this.store=e;var a=e.tiles,n=e.currentMap;this.width=n.width,this.height=n.height,this.tiles=new Array(this.width*this.height);for(var i=0;i<this.height;i++)for(var s=0;s<this.width;s++){var c=Pt(n,s,i);this.tiles[this.width*i+s]={id:c,sprite:a.getImage(c),x:s,y:i}}}return Object(C["a"])(t,[{key:"getTile",value:function(t,e){if(!(t<0||t>=this.width||e<0||e>=this.height))return this.tiles[this.width*e+t]}},{key:"updateTile",value:function(t,e,a,n){var i=this.getTile(t,e);i&&(i.id=a,i.sprite=n,qt(this.store.currentMap,t,e,a))}},{key:"render",value:function(t){for(var e=0;e<this.height;e++)for(var a=0;a<this.width;a++)t.renderTile(this.getTile(a,e))}}]),t}(),Gt=function(){function t(e){Object(r["a"])(this,t),this.store=e,this.cursorLocation=new Rt}return Object(C["a"])(t,[{key:"update",value:function(t,e,a){if(this.cursorLocation.x=e.mx,this.cursorLocation.y=e.my,t.screenToIndexSpace(this.cursorLocation),e.getClick()){var n=a.getTile(this.cursorLocation.x,this.cursorLocation.y);n&&this.store.selected&&this.lastTileEdited!==n&&(a.updateTile(this.cursorLocation.x,this.cursorLocation.y,this.store.selected,this.store.tiles.getImage(this.store.selected)),this.lastTileEdited=n)}else this.lastTileEdited=void 0;t.indexToScreenSpace(this.cursorLocation)}},{key:"render",value:function(t){t.renderTileOutline(this.cursorLocation.x,this.cursorLocation.y)}}]),t}(),Yt=function(){function t(e){Object(r["a"])(this,t),this.store=e,this.controller=new Nt,this.screen=new Ft,this.map=new Ut(this.store),this.editor=new Gt(this.store),this.controller.registerEvents()}return Object(C["a"])(t,[{key:"setFocus",value:function(t){this.controller.setFocus(t)}},{key:"update",value:function(t){this.controller.update(t,this.screen.camera),this.editor.update(this.screen,this.controller,this.map)}},{key:"render",value:function(t){this.store.tiles.hasLoaded()&&(this.screen.begin(t),this.map.render(this.screen),this.editor.render(this.screen),this.screen.end())}},{key:"close",value:function(){}}]),t}(),zt=function(t){function e(){return Object(r["a"])(this,e),Object(c["a"])(this,Object(o["a"])(e).apply(this,arguments))}return Object(A["a"])(e,t),Object(C["a"])(e,[{key:"mounted",value:function(){var t=this.$refs["map-canvas"];this.context=t.getContext("2d"),this.context.canvas.width=this.context.canvas.clientWidth,this.context.canvas.height=this.context.canvas.clientHeight,window.addEventListener("resize",this.onResize.bind(this),{passive:!0}),this.map=new Yt(this.$store.state),this.lastTime=Date.now(),this.requestId=requestAnimationFrame(this.tick.bind(this)),this.register()}},{key:"tick",value:function(t){var e=t-this.lastTime;this.map.update(e),this.lastTime=t,this.map.render(this.context),this.requestId=requestAnimationFrame(this.tick.bind(this))}},{key:"onResize",value:function(t){this.context.canvas.width=this.context.canvas.clientWidth,this.context.canvas.height=this.context.canvas.clientHeight}},{key:"register",value:function(){this.$el.addEventListener("mouseover",this.onFocus.bind(this),{passive:!0}),this.$el.addEventListener("mouseout",this.onBlur.bind(this),{passive:!0})}},{key:"unregister",value:function(){this.$el.removeEventListener("mouseover",this.onFocus.bind(this)),this.$el.removeEventListener("mouseout",this.onBlur.bind(this))}},{key:"onFocus",value:function(){this.map.setFocus(!0)}},{key:"onBlur",value:function(){this.map.setFocus(!1)}}]),e}(l["c"]);zt=u["a"]([Object(l["a"])({name:"MapCanvas",components:{}})],zt);var Kt=zt,Ht=Kt,Vt=(a("02c5"),Object(p["a"])(Ht,Mt,Bt,!1,null,"5011e9c7",null)),Wt=Vt.exports,Zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab-bar"},[a("div",{staticClass:"tabs"},t._l(t.tabs,(function(e){return a("Tab",{key:e.name,attrs:{name:e.name,active:e.active,image:e.image},on:{clicked:function(a){return t.onClick(e)}}})})),1),a("div",{staticClass:"content",class:{hidden:!t.tabActive}},[a(t.currentTab,{tag:"component"})],1)])},Xt=[],te=(a("4160"),a("159b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab",class:{highlighted:t.active},on:{click:function(e){return t.$emit("clicked")}}},[t._v(" "+t._s(t.image)+" ")])}),ee=[],ae=function(t){function e(){return Object(r["a"])(this,e),Object(c["a"])(this,Object(o["a"])(e).apply(this,arguments))}return Object(A["a"])(e,t),e}(l["c"]);u["a"]([Object(l["b"])()],ae.prototype,"name",void 0),u["a"]([Object(l["b"])()],ae.prototype,"active",void 0),u["a"]([Object(l["b"])()],ae.prototype,"image",void 0),ae=u["a"]([Object(l["a"])({name:"Tab",components:{}})],ae);var ne=ae,ie=ne,se=(a("bf2f"),Object(p["a"])(ie,te,ee,!1,null,"7bbf027b",null)),re=se.exports,ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"file-bar"},[a("div",{staticClass:"title"},[t._v("- FILE -")]),a("v-text-field",{staticClass:"mx-2",attrs:{color:"primary",filled:"",dense:""},on:{change:t.onNameChanged},model:{value:t.mapName,callback:function(e){t.mapName=e},expression:"mapName"}}),a("div",{staticClass:"button",on:{click:function(e){return t.onNew()}}},[t._v("New")]),a("div",{staticClass:"button",on:{click:function(e){return t.onSave()}}},[t._v("Save")]),a("div",{staticClass:"button",on:{click:function(e){return t.onDuplicate()}}},[t._v("Duplicate")]),a("div",{staticClass:"button",on:{click:function(e){return t.onLoad()}}},[t._v("Load")])],1)},oe=[],Ae=function(t){function e(){var t;return Object(r["a"])(this,e),t=Object(c["a"])(this,Object(o["a"])(e).apply(this,arguments)),t.mapName="",t}return Object(A["a"])(e,t),Object(C["a"])(e,[{key:"mounted",value:function(){var t=this.$store.state;this.mapName=t.currentMap.name}},{key:"onNameChanged",value:function(){console.log("Changing name to: ".concat(this.mapName,"."));var t=this.$store.state;t.currentMap.name=this.mapName,this.$store.dispatch("renameMap")}},{key:"onNew",value:function(){console.log("Loading a new map..."),this.$store.dispatch("newMap"),this.$router.go(0)}},{key:"onSave",value:function(){console.log("Saving map as: ".concat(this.mapName,"."));var t=this.$store.state;t.currentMap.name=this.mapName,this.$store.dispatch("saveMap")}},{key:"onDuplicate",value:function(){console.log("Duplicating map..."),this.$store.dispatch("duplicateMap"),this.$store.dispatch("saveMap");var t=this.$store.state;this.mapName=t.currentMap.name}},{key:"onLoad",value:function(){console.log("Going to loading screen..."),this.$router.push("/campaign")}}]),e}(l["c"]);Ae=u["a"]([Object(l["a"])({name:"FileBar",components:{}})],Ae);var ue=Ae,le=ue,he=(a("6dc4"),Object(p["a"])(le,ce,oe,!1,null,"694a1426",null)),de=he.exports,me=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"scrollable"},[a("div",{staticClass:"tile-bar"},[a("div",{staticClass:"title"},[t._v("- TILE -")]),t._l(Array.from(t.tiles().names.keys()),(function(e){return a("div",{key:e,staticClass:"tile",class:{highlighted:t.selectedIndex===e}},[a("img",{staticClass:"icon",attrs:{src:t.tiles().getImage(e).src,alt:t.tiles().getName(e)},on:{click:function(a){return t.onClick(e)}}})])}))],2)])},pe=[],ve=function(t){function e(){var t;return Object(r["a"])(this,e),t=Object(c["a"])(this,Object(o["a"])(e).apply(this,arguments)),t.selectedIndex=-1,t}return Object(A["a"])(e,t),Object(C["a"])(e,[{key:"tiles",value:function(){return this.$store.state.tiles}},{key:"onClick",value:function(t){var e=this.$store.state;e.selected=t,this.selectedIndex=t,console.log("Selecting tile ".concat(t))}}]),e}(l["c"]);ve=u["a"]([Object(l["a"])({name:"TileBar",components:{}})],ve);var fe=ve,be=fe,ge=(a("46ed"),Object(p["a"])(be,me,pe,!1,null,"309253ef",null)),ye=ge.exports,Ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"asset-bar"})},Oe=[],ke=function(t){function e(){return Object(r["a"])(this,e),Object(c["a"])(this,Object(o["a"])(e).apply(this,arguments))}return Object(A["a"])(e,t),e}(l["c"]);ke=u["a"]([Object(l["a"])({name:"AssetBar",components:{}})],ke);var je=ke,xe=je,we=(a("320e"),Object(p["a"])(xe,Ce,Oe,!1,null,"794fc71a",null)),Ee=we.exports,Ie=function(t){function e(){var t;return Object(r["a"])(this,e),t=Object(c["a"])(this,Object(o["a"])(e).apply(this,arguments)),t.tabs=[],t.currentTab=null,t.tabActive=!1,t}return Object(A["a"])(e,t),Object(C["a"])(e,[{key:"mounted",value:function(){this.tabs=[{name:"File",active:!1,image:"F",component:de},{name:"Tiles",active:!1,image:"T",component:ye},{name:"Assets",active:!1,image:"A",component:Ee},{name:"Forum",active:!1,image:"C",component:Ee}]}},{key:"onClick",value:function(t){this.tabs.forEach((function(e){t.name!==e.name&&(e.active=!1)})),t.active?(t.active=!1,this.currentTab=null,this.tabActive=!1):(t.active=!0,this.currentTab=t.component,this.tabActive=!0)}}]),e}(l["c"]);Ie=u["a"]([Object(l["a"])({name:"TabBar",components:{Tab:re}})],Ie);var Se=Ie,_e=Se,Te=(a("1d99"),Object(p["a"])(_e,Zt,Xt,!1,null,"58567931",null)),Me=Te.exports,Be=function(t){function e(){return Object(r["a"])(this,e),Object(c["a"])(this,Object(o["a"])(e).apply(this,arguments))}return Object(A["a"])(e,t),e}(l["c"]);Be=u["a"]([Object(l["a"])({name:"Editor",components:{MapCanvas:Wt,TabBar:Me}})],Be);var Qe=Be,De=Qe,Le=(a("7529"),Object(p["a"])(De,_t,Tt,!1,null,"fe37293a",null)),Re=Le.exports,Fe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",[a("v-app-bar",{attrs:{color:"primary"}},[a("span",{staticClass:"title mx-3"},[t._v("Spectrum")]),a("v-spacer"),a("v-text-field",{attrs:{clearable:"","solo-inverted":"","hide-details":"",label:"Search"},on:{input:t.onSearch}}),a("v-spacer"),a("span",{staticClass:"title mx-3"},[t._v(t._s(t.campaign.name))])],1),a("div",{staticClass:"content"},[a("div",{staticClass:"template-header"},[a("h1",[t._v("Start a new map")])]),a("div",{staticClass:"templates"},t._l(t.sortedTemplates(),(function(e){return a("TemplateCard",{key:e.id,attrs:{title:e.name,thumbnail:e.thumbnail},on:{load:function(a){return t.load(e)}}})})),1),a("div",{staticClass:"body-header"},[a("h1",[t._v("Recent maps")])]),a("div",{staticClass:"body"},t._l(t.sortedMaps(),(function(e){return a("MapCard",{key:e.id,attrs:{title:e.name,thumbnail:e.thumbnail},on:{load:function(a){return t.load(e)}}})})),1)])],1)},$e=[],Ne=(a("a4d3"),a("e01a"),a("d28b"),a("4de4"),a("4e82"),a("d3b7"),a("3ca3"),a("2ca0"),a("ddb0"),function(t){function e(){var t;return Object(r["a"])(this,e),t=Object(c["a"])(this,Object(o["a"])(e).apply(this,arguments)),t.templates=[],t.maps=[],t.searchTerm="",t}return Object(A["a"])(e,t),Object(C["a"])(e,[{key:"onSearch",value:function(t){this.searchTerm=t||""}},{key:"mounted",value:function(){var t=Object(P["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.requestTemplates().then((function(){return e.requestMaps(e.campaign.id)})).catch((function(t){console.log("[ Campaign ] Error: ".concat(t))}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"requestMaps",value:function(){var t=Object(P["a"])(regeneratorRuntime.mark((function t(e){var a,n,i,s,r,c,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("[ Campaign ] Requesting maps for campaign ".concat(e,".")),t.prev=1,t.next=4,ut.a.get("/requestMaps",{params:{campaignId:e}});case 4:if(a=t.sent,!a.data||!a.data.maps){t.next=26;break}for(this.maps=a.data.maps,n=!0,i=!1,s=void 0,t.prev=10,r=this.maps[Symbol.iterator]();!(n=(c=r.next()).done);n=!0)o=c.value,o.dateModified=new Date(o.dateModified);t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](10),i=!0,s=t.t0;case 18:t.prev=18,t.prev=19,n||null==r.return||r.return();case 21:if(t.prev=21,!i){t.next=24;break}throw s;case 24:return t.finish(21);case 25:return t.finish(18);case 26:t.next=32;break;case 28:t.prev=28,t.t1=t["catch"](1),console.log("[ Campaign ] Error: ".concat(t.t1)),this.maps=[Jt()];case 32:case"end":return t.stop()}}),t,this,[[1,28],[10,14,18,26],[19,,21,25]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"requestTemplates",value:function(){var t=Object(P["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ut.a.get("/requestTemplates");case 3:e=t.sent,console.log("[ Campaign ] Got request templates. ".concat(JSON.stringify(e.data))),e.data&&e.data.templates&&(this.templates=e.data.templates),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log("[ Campaign ] Error: ".concat(t.t0)),this.templates=[Jt()];case 12:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"load",value:function(t){console.log("[ Campaign ] Got load template request for ".concat(t.name,".")),this.$store.state.currentMap=t,this.$router.push("editor")}},{key:"sortedMaps",value:function(){var t=this;return this.maps.filter((function(e){return e.name.toLowerCase().startsWith(t.searchTerm.toLowerCase())})).sort((function(t,e){return e.dateModified.getTime()-t.dateModified.getTime()}))}},{key:"sortedTemplates",value:function(){var t=this;return this.templates.filter((function(e){return e.name.toLowerCase().startsWith(t.searchTerm.toLowerCase())})).sort((function(t,e){return e.dateModified.getTime()-t.dateModified.getTime()}))}},{key:"campaign",get:function(){var t=this.$store;return t.state.currentCampaign}}]),e}(l["c"]));Ne=u["a"]([Object(l["a"])({components:{InfoBar:K,MapCard:et,TemplateCard:ot}})],Ne);var Pe=Ne,qe=Pe,Je=(a("4c7b"),Object(p["a"])(qe,Fe,$e,!1,null,"08a8f148",null)),Ue=Je.exports,Ge=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",[a("v-app-bar",{attrs:{color:"primary"}},[a("span",{staticClass:"title ml-4"},[t._v("Spectrum")]),a("v-spacer"),a("v-text-field",{attrs:{dense:"",clearable:"","solo-inverted":"","hide-details":"",label:"Search"},on:{input:t.onSearch}}),a("v-spacer"),a("span",{staticClass:"title mr-6"},[t._v("Campaigns")]),a("v-btn",{staticClass:"mr-2",attrs:{fab:"",small:""},on:{click:function(e){t.dialog=!0}}},[a("v-icon",[t._v(t._s(t.mdiPlus))])],1)],1),t.sortedCampaigns().length>0?a("v-list",{attrs:{"three-line":!1}},t._l(t.sortedCampaigns(),(function(e){return a("v-list-item",{key:e.id,on:{click:function(a){return t.onSelection(e)}}},[a("v-list-item-avatar",[a("v-icon",[t._v(t._s(t.mdiSwordCross))])],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.name)}}),a("v-list-item-subtitle",{domProps:{textContent:t._s(e.description)}})],1),a("v-list-item-action",[a("v-list-item-action-text",{domProps:{textContent:t._s(t.getRecentDateTimeString(e.dateModified))}})],1)],1)})),1):a("v-list",[a("div",{staticClass:"my-4"},[t._v("- No Campaigns Here -")])]),a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{"max-width":"600px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Create a Campaign")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Name",required:""},model:{value:t.newCampaignName,callback:function(e){t.newCampaignName=e},expression:"newCampaignName"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Description",required:""},model:{value:t.newCampaignDescription,callback:function(e){t.newCampaignDescription=e},expression:"newCampaignDescription"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"accent",text:""},on:{click:t.clearNewCampaignForm}},[t._v("Cancel")]),a("v-btn",{attrs:{color:"accent",text:""},on:{click:t.onCampaignCreate}},[t._v("Create")])],1)],1)],1)],1)],1)},Ye=[],ze=a("94ed");function Ke(){return{id:"ce9116b1-bad9-4469-b67f-b770eb6db1d1",discriminator:"spectrum.campaign",name:"Sample Campaign",user:"f06fa64c-c947-4a4e-9700-2cbcd55b27e3",description:"This is a sample campaign.",dateModified:new Date(1577862e6)}}var He=a("c50a"),Ve=function(t){function e(){var t;return Object(r["a"])(this,e),t=Object(c["a"])(this,Object(o["a"])(e).apply(this,arguments)),t.campaigns=[],t.dialog=!1,t.searchTerm="",t.newCampaignName="",t.newCampaignDescription="",t}return Object(A["a"])(e,t),Object(C["a"])(e,[{key:"mounted",value:function(){var t=Object(P["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.requestCampaigns();case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"requestCampaigns",value:function(){var t=Object(P["a"])(regeneratorRuntime.mark((function t(){var e,a,n,i,s,r,c,o,A;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$store.state,a=e.currentUser,console.log("[ Selection ] Requesting campaigns for user ".concat(a.name,".")),t.prev=3,t.next=6,ut.a.get("/requestCampaigns",{params:{user:a.id}});case 6:if(n=t.sent,!n.data||!n.data.campaigns){t.next=28;break}for(this.campaigns=n.data.campaigns,i=!0,s=!1,r=void 0,t.prev=12,c=this.campaigns[Symbol.iterator]();!(i=(o=c.next()).done);i=!0)A=o.value,A.dateModified=new Date(A.dateModified);t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](12),s=!0,r=t.t0;case 20:t.prev=20,t.prev=21,i||null==c.return||c.return();case 23:if(t.prev=23,!s){t.next=26;break}throw r;case 26:return t.finish(23);case 27:return t.finish(20);case 28:t.next=34;break;case 30:t.prev=30,t.t1=t["catch"](3),console.log("[ Selection ] Error getting campaigns: ".concat(t.t1)),this.campaigns=[Ke()];case 34:case"end":return t.stop()}}),t,this,[[3,30],[12,16,20,28],[21,,23,27]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"sortedCampaigns",value:function(){var t=this;return this.campaigns.filter((function(e){return e.name.toLowerCase().startsWith(t.searchTerm.toLowerCase())})).sort((function(t,e){return e.dateModified.getTime()-t.dateModified.getTime()}))}},{key:"getRecentDateTimeString",value:function(t){var e=new Date(Date.now()).toLocaleDateString();return t.toLocaleDateString()===e?t.toLocaleTimeString():t.toLocaleDateString()}},{key:"onSearch",value:function(t){this.searchTerm=t||""}},{key:"onSelection",value:function(t){console.log("[ Selection ] Got selection, ".concat(t.name,".")),this.$store.state.currentCampaign=t,this.$router.push("campaign")}},{key:"onCampaignCreate",value:function(){var t=Object(P["a"])(regeneratorRuntime.mark((function t(){var e,a,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.newCampaignName&&this.newCampaignDescription&&(e=this.$store.state,console.log("[ Selection ] Creating campaign with name ".concat(this.newCampaignName," ")+'and description "'.concat(this.newCampaignDescription,'".')),a={discriminator:"spectrum.campaign",id:Object(He["a"])(),name:this.newCampaignName,description:this.newCampaignDescription,user:e.currentUser.id,dateModified:new Date(Date.now())},this.clearNewCampaignForm(),ut.a.post("/createCampaign",{campaign:a}).then((function(t){500===t.status?console.log("[ Selection ] Failed to add campaign. Reason ".concat(t.statusText,".")):n.requestCampaigns()})));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearNewCampaignForm",value:function(){this.newCampaignName="",this.newCampaignDescription="",this.dialog=!1}}]),e}(l["c"]);Ve=u["a"]([Object(l["a"])({data:function(){return{mdiInformation:ze["a"],mdiSwordCross:ze["d"],mdiPlus:ze["b"]}}})],Ve);var We=Ve,Ze=We,Xe=Object(p["a"])(Ze,Ge,Ye,!1,null,"1e8ffe87",null),ta=Xe.exports,ea=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",[a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"primary"}},[a("v-toolbar-title",[t._v(" Join Session ")])],1),a("v-card-text",[a("v-text-field",{staticClass:"mt-4 ml-6 mr-2",attrs:{hint:"4 Characters",placeholder:"Code",filled:"","append-outer-icon":t.mdiSend},on:{"click:append-outer":t.onSubmit},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}),a("div",{staticClass:"mb-2 mx-12"},[t._v(t._s(t.infoMessage))])],1)],1)],1)],1)],1)],1)},aa=[],na=function(t){function e(){var t;return Object(r["a"])(this,e),t=Object(c["a"])(this,Object(o["a"])(e).apply(this,arguments)),t.code="",t.label="",t.infoMessage="Enter the Session Code for the Campaign you would like to join (The DM should create a session and have the code).",t}return Object(A["a"])(e,t),Object(C["a"])(e,[{key:"onSubmit",value:function(t){console.log("submitting with ".concat(this.code))}}]),e}(l["c"]);u["a"]([Object(l["b"])({default:""})],na.prototype,"source",void 0),na=u["a"]([Object(l["a"])({data:function(){return{mdiSend:ze["c"]}}})],na);var ia=na,sa=ia,ra=Object(p["a"])(sa,ea,aa,!1,null,null,null),ca=ra.exports;n["default"].use(b["a"]);var oa=new b["a"]({routes:[{path:"/",name:"home",component:B},{path:"/about",name:"about",component:F},{path:"/campaign",name:"campaign",component:Ue},{path:"/selection",name:"selection",component:ta},{path:"/session",name:"session",component:ca},{path:"/master",name:"master",component:pt},{path:"/player",name:"player",component:Ot},{path:"/spectator",name:"spectator",component:St},{path:"/editor",name:"editor",component:Re}]}),Aa=a("2f62");function ua(t){return"spectrum.tile"===t.discriminator}var la=function(){function t(){Object(r["a"])(this,t),this.names=[],this.images=[],this.loaded=!1}return Object(C["a"])(t,[{key:"init",value:function(){var t=Object(P["a"])(regeneratorRuntime.mark((function t(){var e,a,n,i,s,r,c,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ut.a.get("/requestTiles");case 2:if(e=t.sent,!e.data.tiles){t.next=23;break}for(a=!0,n=!1,i=void 0,t.prev=7,s=e.data.tiles[Symbol.iterator]();!(a=(r=s.next()).done);a=!0)c=r.value,ua(c)&&(this.names[c.id]=c.name,o=new Image,o.src=c.image,this.images[c.id]=o);t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](7),n=!0,i=t.t0;case 15:t.prev=15,t.prev=16,a||null==s.return||s.return();case 18:if(t.prev=18,!n){t.next=21;break}throw i;case 21:return t.finish(18);case 22:return t.finish(15);case 23:this.loaded=!0;case 24:case"end":return t.stop()}}),t,this,[[7,11,15,23],[16,,18,22]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"getName",value:function(t){return this.names[t]}},{key:"getImage",value:function(t){return this.images[t]}},{key:"hasLoaded",value:function(){return this.loaded}}]),t}(),ha=function(){function t(){Object(r["a"])(this,t)}return Object(C["a"])(t,null,[{key:"Init",value:function(){t.Canvas=document.createElement("canvas")}},{key:"CreateThumbnail",value:function(e,a,n,i){t.Canvas||(t.Canvas=document.createElement("canvas")),t.Canvas.width=e,t.Canvas.height=a;var s=t.Canvas.getContext("2d");if(s){for(var r=e/n.width,c=a/n.height,o=0;o<n.height;o++)for(var A=0;A<n.width;A++){var u=Pt(n,A,o),l=i.getImage(u);s.drawImage(l,r*A,c*o,r,c)}return t.Canvas.toDataURL()}return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAsTAAALEwEAmpwYAAABcVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATWVroAAAAenRSTlMAAQIDBAUGBwgJCwwNDxAREhQVFhcZGhseHyAhIiUmJygtLzA1Nzg9P0FGSEpQUlRbXF9lZ2hqbnFzdXZ8foCDiYqMjo+VlpecoKKpq62us7W3uL2+wMPHyczP0NHU1dbY3N3e4OLj5Obo6ert7u/y8/X29/n6+/z9/l5G4FoAAAInSURBVHja7dxXVxRBEIbhWlfEJRhACYJiQEAFBCQZAROyJhQURdRdSSaQpLj167mnLmUGqny/H1A9z/Q53VOn57TInub0J000klIaixoCcm5RQ0AufNMQkNafGgLS/ktDQK6uawhI15aGgPT80RCQG381BGRYNQTkrsaAjGkISOaRhoBkJxIeMiVI2TMNATk6qSEgldMaAnJsRkNAamY1BKTus4aAnPmiISAtS7ufvOQScvG7mYIBj5DLK8YxJA4hHWvGcUscQq5tGMcdcQjptu35iDiE9G4bx6g4hPSXjOOhOITctFvfY3EIuWcdTzIOIfetI39I3EEy49bxNCvuINm8dbw4LO4gR55bx8sycQfJvbKO1+XiDlL1xjqmcuIOcvyddbytEHeQ2jnrmKkSd5D6gnW8rxZ3kOZ56/hwQtxBzi9bx8eT4g5y6Yd1FE6JO0jbqnUU68Qd5Iptz3WhQdxBOjetY6lJ3EGu/7aOr2fFHaRve/8Pyfai6mBJQ0BuH4hjy3+vOqIxIA80CESBAAECBAgQIKn9JwUECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAOaBvAggQIECAAAECBAgQIECAAPl/IYmOBQQIECBAgAABAgQIECBAgAAB4hCyD5cqAQECBAgQIECAAAHCZzwQIECAAAECBAgQIECcQJJthYAAAQLEFyTFtR0IECBAgJDY2QGtwG+USmY7swAAAABJRU5ErkJggg=="}}]),t}();function da(){return{discriminator:"spectrum.user",id:"f06fa64c-c947-4a4e-9700-2cbcd55b27e3",name:"SampleUser",email:"sampleuser@gmail.com",password:"hash",dateJoined:new Date(1577862e6)}}n["default"].use(Aa["b"]);var ma=new la;ma.init(),ha.Init();var pa=new Aa["a"]({state:{welcomeMessage:!1,currentMap:Jt(),currentCampaign:Ke(),currentUser:da(),tiles:ma,selected:0},mutations:{},actions:{renameMap:function(t){var e=t.state,a=e.currentMap;ut.a.post("/saveMap",{map:a})},saveMap:function(t){var e=t.state;console.log("[ Store ] Saving map ".concat(e.currentMap.name,"."));var a=e.currentMap,n=e.tiles,i=ha.CreateThumbnail(200,200,a,n);a.thumbnail=i,a.campaign=e.currentCampaign.id,ut.a.post("/saveMap",{map:a})},duplicateMap:function(t){var e=t.state;console.log("[ Store ] Duplicating current map ".concat(e.currentMap.name,"."));var a=e.currentMap;a.name="Copy of ".concat(a.name),a.id=Object(He["a"])(),a.campaign=e.currentCampaign.id}},modules:{}}),va=a("ce5b"),fa=a.n(va);a("bf40");n["default"].use(fa.a);var ba=new fa.a({icons:{iconfont:"mdiSvg"},theme:{dark:!0,themes:{light:{primary:"#cccccc",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"},dark:{primary:"#333333",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}});n["default"].config.productionTip=!1,new n["default"]({router:oa,store:pa,vuetify:ba,render:function(t){return t(f)}}).$mount("#app")},d017:function(t,e,a){"use strict";var n=a("0877"),i=a.n(n);i.a},d1f0:function(t,e,a){"use strict";var n=a("2e73"),i=a.n(n);i.a},e8d8:function(t,e,a){}});
//# sourceMappingURL=app.7d9b780f.js.map