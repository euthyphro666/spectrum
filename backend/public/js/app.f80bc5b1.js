(function(t){function e(e){for(var n,r,c=e[0],o=e[1],l=e[2],A=0,h=[];A<c.length;A++)r=c[A],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&h.push(s[r][0]),s[r]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);u&&u(e);while(h.length)h.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,c=1;c<a.length;c++){var o=a[c];0!==s[o]&&(n=!1)}n&&(i.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},s={app:0},i=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=o;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},"001e":function(t,e,a){},"034f":function(t,e,a){"use strict";var n=a("85ec"),s=a.n(n);s.a},"0f68":function(t,e,a){},"1db0":function(t,e,a){},"1df2":function(t,e,a){},"1f31":function(t,e,a){},"20c3":function(t,e,a){},"2e73":function(t,e,a){},"32b2":function(t,e,a){"use strict";var n=a("1db0"),s=a.n(n);s.a},"3f0b":function(t,e,a){"use strict";var n=a("8f80"),s=a.n(n);s.a},"41e6":function(t,e,a){},"48e6":function(t,e,a){"use strict";var n=a("8b96"),s=a.n(n);s.a},"5c05":function(t,e,a){"use strict";var n=a("20c3"),s=a.n(n);s.a},"681a":function(t,e,a){"use strict";var n=a("6f75"),s=a.n(n);s.a},"6ebb":function(t,e,a){"use strict";var n=a("001e"),s=a.n(n);s.a},"6f75":function(t,e,a){},"724f":function(t,e,a){"use strict";var n=a("9111"),s=a.n(n);s.a},"72dd":function(t,e,a){"use strict";var n=a("b05b"),s=a.n(n);s.a},"816f":function(t,e,a){"use strict";var n=a("9be3"),s=a.n(n);s.a},"826d":function(t,e,a){"use strict";var n=a("99cd"),s=a.n(n);s.a},"85ec":function(t,e,a){},"89b9":function(t,e,a){"use strict";var n=a("b2f8"),s=a.n(n);s.a},"8b96":function(t,e,a){},"8f80":function(t,e,a){},9111:function(t,e,a){},"99cd":function(t,e,a){},"9aad":function(t,e,a){"use strict";var n=a("ae2e"),s=a.n(n);s.a},"9be3":function(t,e,a){},"9c9f":function(t,e,a){},ae2e:function(t,e,a){},b05b:function(t,e,a){},b2f8:function(t,e,a){},b6bc:function(t,e,a){"use strict";var n=a("ff64"),s=a.n(n);s.a},bf2f:function(t,e,a){"use strict";var n=a("1f31"),s=a.n(n);s.a},cc6a:function(t,e,a){"use strict";var n=a("41e6"),s=a.n(n);s.a},cd49:function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{staticClass:"overflow-hidden",attrs:{id:"spectrum"}},[a("router-view"),a("div",{attrs:{id:"version"}},[t._v("Alpha")])],1)},i=[],r=a("d4ec"),c=a("262e"),o=a("2caf"),l=a("9ab4"),u=a("60a3"),A=function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){return Object(r["a"])(this,a),e.apply(this,arguments)}return a}(u["c"]);A=l["a"]([Object(u["a"])({name:"App",components:{}})],A);var h=A,d=h,m=(a("034f"),a("2877")),p=Object(m["a"])(d,s,i,!1,null,null,null),v=p.exports,f=a("8c4f"),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("div",{staticClass:"master-selection",on:{click:function(e){return t.onSelection("master")}}},[a("h1",[t._v("Game Master")])]),a("div",{staticClass:"player-selection",on:{click:function(e){return t.onSelection("player")}}},[a("h1",[t._v("Player")])]),a("div",{staticClass:"spectator-selection",on:{click:function(e){return t.onSelection("spectator")}}},[a("h1",[t._v("Spectator")])]),a("DialogueBox",{attrs:{title:"Welcome",message:"Spectrum is currently in alpha. Expect things to break or not work in the first place. If you have any suggestions or feedback feel free to email joshhess13@gmail.com.",hidden:t.showDialogue},on:{confirmed:t.onDialogue}})],1)},b=[],y=a("bee2"),C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dialogue-background",class:{hidden:t.hidden}},[a("div",{staticClass:"dialogue-box"},[a("h1",[t._v(t._s(t.title))]),a("h2",[t._v(t._s(t.message))]),a("div",{staticClass:"dialogue-button",on:{click:function(e){t.hidden=!0,t.$emit("confirmed")}}},[a("h2",[t._v("Confirm")])])])])},k=[],w=function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){return Object(r["a"])(this,a),e.apply(this,arguments)}return a}(u["c"]);l["a"]([Object(u["b"])()],w.prototype,"title",void 0),l["a"]([Object(u["b"])()],w.prototype,"message",void 0),l["a"]([Object(u["b"])()],w.prototype,"hidden",void 0),w=l["a"]([Object(u["a"])({name:"DialogueBox",components:{}})],w);var O=w,x=O,j=(a("32b2"),Object(m["a"])(x,C,k,!1,null,"2f608610",null)),I=j.exports,_=function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.showDialogue=!1,t}return Object(y["a"])(a,[{key:"mounted",value:function(){this.showDialogue=this.$store.state.welcomeMessage}},{key:"onDialogue",value:function(){this.$store.state.welcomeMessage=!0,this.showDialogue=!0}},{key:"onSelection",value:function(t){var e=this.$store.state;e.sessionRole=t,"master"===t&&this.$router.push("/selection"),"player"===t&&this.$router.push("/session"),"spectator"===t&&this.$router.push("/session")}}]),a}(u["c"]);_=l["a"]([Object(u["a"])({name:"Home",components:{DialogueBox:I}})],_);var E=_,S=E,T=(a("cc6a"),Object(m["a"])(S,g,b,!1,null,"3aab9d1e",null)),M=T.exports,L=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},R=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about"},[a("h1",[t._v("This is an about page")])])}],B={},Q=Object(m["a"])(B,L,R,!1,null,null,null),D=Q.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"player"})},N=[],P=function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){return Object(r["a"])(this,a),e.apply(this,arguments)}return a}(u["c"]);P=l["a"]([Object(u["a"])({name:"Player",components:{}})],P);var F=P,q=F,U=(a("9aad"),Object(m["a"])(q,$,N,!1,null,"6641f362",null)),G=U.exports,J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"spectator"})},Y=[],H=function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){return Object(r["a"])(this,a),e.apply(this,arguments)}return a}(u["c"]);H=l["a"]([Object(u["a"])({name:"Spectator",components:{}})],H);var W=H,z=W,V=(a("5c05"),Object(m["a"])(z,J,Y,!1,null,"600f29fe",null)),Z=V.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",[a("v-app-bar",{attrs:{color:"primary"}},[a("span",{staticClass:"title mx-3"},[t._v("Spectrum")]),a("v-spacer"),a("v-text-field",{attrs:{clearable:"","solo-inverted":"","hide-details":"",label:"Search"},on:{input:t.onSearch}}),a("v-spacer"),a("span",{staticClass:"title mx-3"},[t._v(t._s(t.campaign.name))])],1),a("div",{staticClass:"content"},[a("div",{staticClass:"template-header"},[a("h1",[t._v("Start a new map")])]),a("div",{staticClass:"templates"},t._l(t.sortedTemplates(),(function(e){return a("TemplateCard",{key:e.id,attrs:{title:e.name,thumbnail:e.thumbnail},on:{load:function(a){return t.load(e)}}})})),1),a("div",{staticClass:"body-header"},[a("h1",[t._v("Recent maps")])]),a("div",{staticClass:"body"},t._l(t.sortedMaps(),(function(e){return a("MapCard",{key:e.id,attrs:{title:e.name,thumbnail:e.thumbnail},on:{load:function(a){return t.load(e)}}})})),1)])],1)},X=[],tt=(a("4de4"),a("b0c0"),a("2ca0"),a("b85c")),et=(a("96cf"),a("1da1")),at=a("bc3a"),nt=a.n(at),st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"info-bar"},[a("h1",{staticClass:"left"},[t._v(t._s(t.title))]),a("div",{staticClass:"search"},[t._v(t._s(t.search))]),a("h1",{staticClass:"right"},[t._v(t._s(t.subtitle))])])},it=[],rt=(a("ac1f"),a("841c"),function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.search="Search",t}return a}(u["c"]));rt=l["a"]([Object(u["a"])({name:"InfoBar",components:{},props:{title:String,subtitle:String}})],rt);var ct=rt,ot=ct,lt=(a("d1f0"),Object(m["a"])(ot,st,it,!1,null,"cec287b6",null)),ut=lt.exports,At=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"map-card",on:{click:function(e){return t.$emit("load")}}},[a("div",{staticClass:"thumb"},[a("img",{attrs:{src:t.thumbnail,alt:t.title}})]),a("h1",[t._v(t._s(t.title))])])},ht=[],dt=function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){return Object(r["a"])(this,a),e.apply(this,arguments)}return a}(u["c"]);dt=l["a"]([Object(u["a"])({name:"MapCard",components:{},props:{title:String,thumbnail:String}})],dt);var mt=dt,pt=mt,vt=(a("681a"),Object(m["a"])(pt,At,ht,!1,null,"13dd004e",null)),ft=vt.exports,gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"template-card",on:{click:function(e){return t.$emit("load")}}},[a("div",{staticClass:"thumb"},[a("img",{attrs:{src:t.thumbnail,alt:t.title}})]),a("h1",[t._v(t._s(t.title))])])},bt=[],yt=function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){return Object(r["a"])(this,a),e.apply(this,arguments)}return a}(u["c"]);yt=l["a"]([Object(u["a"])({name:"TemplateCard",components:{},props:{title:String,thumbnail:String}})],yt);var Ct=yt,kt=Ct,wt=(a("89b9"),Object(m["a"])(kt,gt,bt,!1,null,"e4a21486",null)),Ot=wt.exports;a("99af"),a("1276");function xt(t){return"spectrum.map"===t.discriminator}function jt(t,e,a){return t.assets[a*t.width+e]}function It(t,e,a){return t.tiles[a*t.width+e]}function _t(t,e,a,n){t.tiles[a*t.width+e]=n}function Et(t,e,a,n){t.tiles[a*t.width+e]=n}function St(t,e,a,n){t.characters.push("".concat(e,",").concat(a,"_").concat(n))}function Tt(t,e){t.characters=t.characters.filter((function(t){return t.split("_")[1]!==e}))}function Mt(t,e,a){var n="".concat(e,",").concat(a);t.characters=t.characters.filter((function(t){return t.split("_")[0]!==n}))}function Lt(){return{discriminator:"spectrum.map",id:"d10c2776-cc1b-402f-b87c-46da711c4da6",name:"Sample Map",campaign:"ce9116b1-bad9-4469-b67f-b770eb6db1d1",dateModified:new Date(1577862e6),thumbnail:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAsTAAALEwEAmpwYAAABcVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATWVroAAAAenRSTlMAAQIDBAUGBwgJCwwNDxAREhQVFhcZGhseHyAhIiUmJygtLzA1Nzg9P0FGSEpQUlRbXF9lZ2hqbnFzdXZ8foCDiYqMjo+VlpecoKKpq62us7W3uL2+wMPHyczP0NHU1dbY3N3e4OLj5Obo6ert7u/y8/X29/n6+/z9/l5G4FoAAAInSURBVHja7dxXVxRBEIbhWlfEJRhACYJiQEAFBCQZAROyJhQURdRdSSaQpLj167mnLmUGqny/H1A9z/Q53VOn57TInub0J000klIaixoCcm5RQ0AufNMQkNafGgLS/ktDQK6uawhI15aGgPT80RCQG381BGRYNQTkrsaAjGkISOaRhoBkJxIeMiVI2TMNATk6qSEgldMaAnJsRkNAamY1BKTus4aAnPmiISAtS7ufvOQScvG7mYIBj5DLK8YxJA4hHWvGcUscQq5tGMcdcQjptu35iDiE9G4bx6g4hPSXjOOhOITctFvfY3EIuWcdTzIOIfetI39I3EEy49bxNCvuINm8dbw4LO4gR55bx8sycQfJvbKO1+XiDlL1xjqmcuIOcvyddbytEHeQ2jnrmKkSd5D6gnW8rxZ3kOZ56/hwQtxBzi9bx8eT4g5y6Yd1FE6JO0jbqnUU68Qd5Iptz3WhQdxBOjetY6lJ3EGu/7aOr2fFHaRve/8Pyfai6mBJQ0BuH4hjy3+vOqIxIA80CESBAAECBAgQIKn9JwUECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAOaBvAggQIECAAAECBAgQIECAAPl/IYmOBQQIECBAgAABAgQIECBAgAAB4hCyD5cqAQECBAgQIECAAAHCZzwQIECAAAECBAgQIECcQJJthYAAAQLEFyTFtR0IECBAgJDY2QGtwG+USmY7swAAAABJRU5ErkJggg==",height:16,width:16,characters:[],assets:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],tiles:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}}var Rt=function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.templates=[],t.maps=[],t.searchTerm="",t}return Object(y["a"])(a,[{key:"onSearch",value:function(t){this.searchTerm=t||""}},{key:"mounted",value:function(){var t=Object(et["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.requestTemplates().then((function(){return e.requestMaps(e.campaign.id)})).catch((function(t){console.log("[ Campaign ] Error: ".concat(t))}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"requestMaps",value:function(){var t=Object(et["a"])(regeneratorRuntime.mark((function t(e){var a,n,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("[ Campaign ] Requesting maps for campaign ".concat(e,".")),t.prev=1,t.next=4,nt.a.get("/requestMaps",{params:{campaignId:e}});case 4:if(a=t.sent,a.data&&a.data.maps){this.maps=a.data.maps,n=Object(tt["a"])(this.maps);try{for(n.s();!(s=n.n()).done;)i=s.value,i.dateModified=new Date(i.dateModified)}catch(r){n.e(r)}finally{n.f()}}t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](1),console.log("[ Campaign ] Error: ".concat(t.t0)),this.maps=[Lt()];case 12:case"end":return t.stop()}}),t,this,[[1,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"requestTemplates",value:function(){var t=Object(et["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,nt.a.get("/requestTemplates");case 3:e=t.sent,e.data&&e.data.templates&&(this.templates=e.data.templates),t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log("[ Campaign ] Error: ".concat(t.t0)),this.templates=[Lt()];case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"load",value:function(t){console.log("[ Campaign ] Got load template request for ".concat(t.name,".")),this.$store.state.currentMap=t,this.$router.push("editor")}},{key:"sortedMaps",value:function(){var t=this;return this.maps.filter((function(e){return e.name.toLowerCase().startsWith(t.searchTerm.toLowerCase())})).sort((function(t,e){return e.dateModified.getTime()-t.dateModified.getTime()}))}},{key:"sortedTemplates",value:function(){var t=this;return this.templates.filter((function(e){return e.name.toLowerCase().startsWith(t.searchTerm.toLowerCase())})).sort((function(t,e){return e.dateModified.getTime()-t.dateModified.getTime()}))}},{key:"campaign",get:function(){var t=this.$store;return t.state.currentCampaign}}]),a}(u["c"]);Rt=l["a"]([Object(u["a"])({components:{InfoBar:ut,MapCard:ft,TemplateCard:Ot}})],Rt);var Bt=Rt,Qt=Bt,Dt=(a("724f"),Object(m["a"])(Qt,K,X,!1,null,"1c2364e4",null)),$t=Dt.exports,Nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",[a("v-app-bar",{attrs:{color:"primary"}},[a("span",{staticClass:"title ml-4"},[t._v("Spectrum")]),a("v-spacer"),a("v-text-field",{attrs:{dense:"",clearable:"","solo-inverted":"","hide-details":"",label:"Search"},on:{input:t.onSearch}}),a("v-spacer"),a("span",{staticClass:"title mr-6"},[t._v("Campaigns")]),a("v-btn",{staticClass:"mr-2",attrs:{fab:"",small:""},on:{click:function(e){t.dialog=!0}}},[a("v-icon",[t._v(t._s(t.mdiPlus))])],1)],1),t.sortedCampaigns().length>0?a("v-list",{attrs:{"three-line":!1}},t._l(t.sortedCampaigns(),(function(e){return a("v-list-item",{key:e.id,on:{click:function(a){return t.onSelection(e)}}},[a("v-list-item-avatar",[a("v-icon",[t._v(t._s(t.mdiSwordCross))])],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.name)}}),a("v-list-item-subtitle",{domProps:{textContent:t._s(e.description)}})],1),a("v-list-item-action",[a("v-list-item-action-text",{domProps:{textContent:t._s(t.getRecentDateTimeString(e.dateModified))}})],1)],1)})),1):a("v-list",[a("div",{staticClass:"my-4"},[t._v("- No Campaigns Here -")])]),a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{"max-width":"600px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Create a Campaign")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Name",required:""},model:{value:t.newCampaignName,callback:function(e){t.newCampaignName=e},expression:"newCampaignName"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Description",required:""},model:{value:t.newCampaignDescription,callback:function(e){t.newCampaignDescription=e},expression:"newCampaignDescription"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"accent",text:""},on:{click:t.clearNewCampaignForm}},[t._v("Cancel")]),a("v-btn",{attrs:{color:"accent",text:""},on:{click:t.onCampaignCreate}},[t._v("Create")])],1)],1)],1)],1)],1)},Pt=[],Ft=a("94ed");function qt(){return{id:"ce9116b1-bad9-4469-b67f-b770eb6db1d1",discriminator:"spectrum.campaign",name:"Sample Campaign",user:"f06fa64c-c947-4a4e-9700-2cbcd55b27e3",description:"This is a sample campaign.",dateModified:new Date(1577862e6)}}var Ut=a("c50a"),Gt=function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.campaigns=[],t.dialog=!1,t.searchTerm="",t.newCampaignName="",t.newCampaignDescription="",t}return Object(y["a"])(a,[{key:"created",value:function(){var t=Object(et["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.requestCampaigns();case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"requestCampaigns",value:function(){var t=Object(et["a"])(regeneratorRuntime.mark((function t(){var e,a,n,s,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$store.state,a=e.currentUser,console.log("[ Selection ] Requesting campaigns for user ".concat(a.name,".")),t.prev=3,t.next=6,nt.a.get("/requestCampaigns",{params:{user:a.id}});case 6:if(n=t.sent,n.data&&n.data.campaigns){this.campaigns=n.data.campaigns,s=Object(tt["a"])(this.campaigns);try{for(s.s();!(i=s.n()).done;)r=i.value,r.dateModified=new Date(r.dateModified)}catch(c){s.e(c)}finally{s.f()}}t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](3),console.log("[ Selection ] Error getting campaigns: ".concat(t.t0)),this.campaigns=[qt()];case 14:case"end":return t.stop()}}),t,this,[[3,10]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"sortedCampaigns",value:function(){var t=this;return this.campaigns.filter((function(e){return e.name.toLowerCase().startsWith(t.searchTerm.toLowerCase())})).sort((function(t,e){return e.dateModified.getTime()-t.dateModified.getTime()}))}},{key:"getRecentDateTimeString",value:function(t){var e=new Date(Date.now()).toLocaleDateString();return t.toLocaleDateString()===e?t.toLocaleTimeString():t.toLocaleDateString()}},{key:"onSearch",value:function(t){this.searchTerm=t||""}},{key:"onSelection",value:function(t){console.log("[ Selection ] Got selection, ".concat(t.name,".")),this.$store.state.currentCampaign=t,this.$router.push("campaign")}},{key:"onCampaignCreate",value:function(){var t=Object(et["a"])(regeneratorRuntime.mark((function t(){var e,a,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.newCampaignName&&this.newCampaignDescription&&(e=this.$store.state,console.log("[ Selection ] Creating campaign with name ".concat(this.newCampaignName," ")+'and description "'.concat(this.newCampaignDescription,'".')),a={discriminator:"spectrum.campaign",id:Object(Ut["a"])(),name:this.newCampaignName,description:this.newCampaignDescription,user:e.currentUser.id,dateModified:new Date(Date.now())},this.clearNewCampaignForm(),nt.a.post("/createCampaign",{campaign:a}).then((function(t){500===t.status?console.log("[ Selection ] Failed to add campaign. Reason ".concat(t.statusText,".")):n.requestCampaigns()})));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearNewCampaignForm",value:function(){this.newCampaignName="",this.newCampaignDescription="",this.dialog=!1}}]),a}(u["c"]);Gt=l["a"]([Object(u["a"])({data:function(){return{mdiInformation:Ft["d"],mdiSwordCross:Ft["g"],mdiPlus:Ft["e"]}}})],Gt);var Jt=Gt,Yt=Jt,Ht=Object(m["a"])(Yt,Nt,Pt,!1,null,"3ddb87e8",null),Wt=Ht.exports,zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",[a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"primary"}},[a("v-toolbar-title",[t._v(" Join Session ")])],1),a("v-card-text",[a("v-text-field",{staticClass:"mt-4 ml-6 mr-2",attrs:{hint:"4 Characters",placeholder:"Code",filled:"","append-outer-icon":t.mdiSend},on:{"click:append-outer":t.onSubmit},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}),a("div",{staticClass:"mb-2 mx-12"},[t._v(t._s(t.infoMessage))])],1)],1)],1)],1)],1)],1)},Vt=[],Zt=function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.code="",t.label="",t.infoMessage="Enter the Session Code for the Campaign you would like to join (The DM should create a session and have the code).",t}return Object(y["a"])(a,[{key:"onSubmit",value:function(t){var e=this;console.log("submitting with ".concat(this.code));var a=this.$store.state;nt.a.get("/joinSession",{params:{userId:a.currentUser.id,code:this.code,isPlayer:"player"===a.sessionRole}}).then((function(t){t.data&&t.data.session&&(a.currentSession=t.data.session,e.$router.push("/viewer"))}))}}]),a}(u["c"]);l["a"]([Object(u["b"])({default:""})],Zt.prototype,"source",void 0),Zt=l["a"]([Object(u["a"])({data:function(){return{mdiSend:Ft["f"]}}})],Zt);var Kt=Zt,Xt=Kt,te=Object(m["a"])(Xt,zt,Vt,!1,null,null,null),ee=te.exports,ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"editor"},[a("MapCanvas",{attrs:{editable:!0}}),a("TabBar")],1)},ne=[],se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"root"},[a("canvas",{ref:"map-canvas",staticClass:"screen"})])},ie=[],re=(a("d81d"),a("4c53"),function(){function t(){Object(r["a"])(this,t),this.x=0,this.y=0,this.s=1}return Object(y["a"])(t,[{key:"move",value:function(t,e){this.x+=t/this.s,this.y+=e/this.s}},{key:"zoom",value:function(t){this.s+=t,this.s<.5?this.s=.5:this.s>10&&(this.s=10)}}]),t}()),ce=re,oe=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(r["a"])(this,t),this.x=e,this.y=a}return Object(y["a"])(t,[{key:"add",value:function(t,e){return this.x+=t,this.y+=e,this}},{key:"addV",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"sub",value:function(t,e){return this.x-=t,this.y-=e,this}},{key:"subV",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:"multiply",value:function(t){return this.x*=t,this.y*=t,this}},{key:"divide",value:function(t){return this.x/=t,this.y/=t,this}},{key:"floorDivide",value:function(t){return this.x=Math.floor(this.x/t),this.y=Math.floor(this.y/t),this}}]),t}(),le=oe,ue=function(){function t(){Object(r["a"])(this,t),this.camera=new ce}return Object(y["a"])(t,[{key:"begin",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.context=t,this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height),this.context.imageSmoothingEnabled=e,this.context.strokeStyle="#e4f03d",this.context.lineWidth=3,this.context.beginPath()}},{key:"end",value:function(){this.context&&this.context.stroke(),this.context=void 0}},{key:"renderTile",value:function(e){this.context?e.sprite&&this.context.drawImage(e.sprite,(e.x*t.TILE_SIZE+this.camera.x)*this.camera.s,(e.y*t.TILE_SIZE+this.camera.y)*this.camera.s,t.TILE_SIZE*this.camera.s,t.TILE_SIZE*this.camera.s):console.log("[ Screen ] Begin has not been called yet this frame.")}},{key:"renderRawTile",value:function(e,a,n){this.context?n&&this.context.drawImage(n,(e*t.TILE_SIZE+this.camera.x)*this.camera.s,(a*t.TILE_SIZE+this.camera.y)*this.camera.s,t.TILE_SIZE*this.camera.s,t.TILE_SIZE*this.camera.s):console.log("[ Screen ] Begin has not been called yet this frame.")}},{key:"renderTileOutline",value:function(e,a){var n=new le(0,0);return this.context?this.context.rect(e,a,t.TILE_SIZE*this.camera.s,t.TILE_SIZE*this.camera.s):console.log("[ Screen ] Begin has not been called yet this frame."),n}},{key:"screenToWorldSpace",value:function(t){return t.divide(this.camera.s).sub(this.camera.x,this.camera.y)}},{key:"worldToScreenSpace",value:function(t){return t.divide(this.camera.s).sub(this.camera.x,this.camera.y)}},{key:"screenToIndexSpace",value:function(e){return e.divide(this.camera.s).sub(this.camera.x,this.camera.y).floorDivide(t.TILE_SIZE)}},{key:"indexToScreenSpace",value:function(e){return e.multiply(t.TILE_SIZE).add(this.camera.x,this.camera.y).multiply(this.camera.s)}}]),t}();ue.TILE_SIZE=64;var Ae=function(){function t(){Object(r["a"])(this,t),this.hasFocus=!1,this.upPressed=!1,this.downPressed=!1,this.leftPressed=!1,this.rightPressed=!1,this.panPressed=!1,this.clickDown=!1,this.mdx=0,this.mdy=0,this.mlx=0,this.mly=0,this.ds=0,this.mx=0,this.my=0}return Object(y["a"])(t,[{key:"setFocus",value:function(t){this.hasFocus=t,this.hasFocus||(this.hasFocus=!1,this.upPressed=!1,this.downPressed=!1,this.leftPressed=!1,this.rightPressed=!1,this.panPressed=!1,this.clickDown=!1,this.mdx=0,this.mdy=0,this.mlx=0,this.mly=0,this.ds=0,this.mx=0,this.my=0)}},{key:"getClick",value:function(){return this.clickDown}},{key:"update",value:function(t,e){if(this.hasFocus){var a=5,n=this.leftPressed?this.rightPressed?0:-a:this.rightPressed?a:0,s=this.upPressed?this.downPressed?0:-a:this.downPressed?a:0;n+=this.mdx,s+=this.mdy,this.mdx=0,this.mdy=0,e.move(-n,-s),e.zoom(this.ds),this.ds=0}}},{key:"registerEvents",value:function(){document.addEventListener("keydown",this.onKeyDown.bind(this),{passive:!0}),document.addEventListener("keyup",this.onKeyUp.bind(this),{passive:!0}),document.addEventListener("mousedown",this.onMouseDown.bind(this),{passive:!0}),document.addEventListener("mousemove",this.onMouseMove.bind(this),{passive:!0}),document.addEventListener("mouseup",this.onMouseUp.bind(this),{passive:!0}),document.addEventListener("wheel",this.onScroll.bind(this),{passive:!0})}},{key:"unRegisterEvents",value:function(){document.removeEventListener("keydown",this.onKeyDown.bind(this)),document.removeEventListener("keyup",this.onKeyUp.bind(this))}},{key:"onKeyDown",value:function(t){this.hasFocus&&(65===t.keyCode||37===t.keyCode?this.leftPressed=!0:87===t.keyCode||38===t.keyCode?this.upPressed=!0:83===t.keyCode||40===t.keyCode?this.downPressed=!0:68!==t.keyCode&&39!==t.keyCode||(this.rightPressed=!0))}},{key:"onKeyUp",value:function(t){this.hasFocus&&(65===t.keyCode||37===t.keyCode?this.leftPressed=!1:87===t.keyCode||38===t.keyCode?this.upPressed=!1:83===t.keyCode||40===t.keyCode?this.downPressed=!1:68!==t.keyCode&&39!==t.keyCode||(this.rightPressed=!1))}},{key:"onMouseDown",value:function(t){this.hasFocus&&((t.shiftKey||1===t.button)&&(this.panPressed=!0,this.mlx=t.screenX,this.mly=t.screenY),1!=t.button&&(this.clickDown=!0))}},{key:"onMouseMove",value:function(t){this.hasFocus&&(this.mx=t.clientX,this.my=t.clientY,this.panPressed&&(this.mdx+=this.mlx-t.screenX,this.mdy+=this.mly-t.screenY,this.mlx=t.screenX,this.mly=t.screenY))}},{key:"onMouseUp",value:function(t){this.hasFocus&&(this.panPressed=!1,this.clickDown=!1)}},{key:"onScroll",value:function(t){this.hasFocus&&(this.ds-=t.deltaY/1e3)}}]),t}(),he=Ae,de=function(){function t(e){var a=this;Object(r["a"])(this,t),this.loaded=!1,this.store=e;var n=e.state.assets,s=e.state.tiles,i=e.state.currentMap;this.width=i.width,this.height=i.height,this.assets=new Array(this.width*this.height),this.tiles=new Array(this.width*this.height);for(var c=0;c<this.height;c++)for(var o=0;o<this.width;o++){var l=jt(i,o,c);this.assets[this.width*c+o]={id:l,sprite:l>0?n.getImage(l):void 0,x:o,y:c};var u=It(i,o,c);this.tiles[this.width*c+o]={id:u,sprite:u>0?s.getImage(u):void 0,x:o,y:c}}this.characters=new Array(this.width*this.height),e.state.characters.getCharacters(e.state.currentMap.campaign).then((function(t){var e,n=Object(tt["a"])(i.characters);try{for(n.s();!(e=n.n()).done;){var s=e.value;try{var r,c=s.split("_")[0],o=s.split("_")[1],l=parseInt(c.split(",")[0]),u=parseInt(c.split(",")[1]),A=Object(tt["a"])(t);try{for(A.s();!(r=A.n()).done;){var h=r.value;h.id===o&&(a.characters[a.width*u+l]=h)}}catch(d){A.e(d)}finally{A.f()}a.characters[a.width*u+l]||console.log("[ Map ] Failed to find charcter matching given id, ".concat(o," in map ").concat(i.name,"."))}catch(m){console.log("[ Map ] Could not parse character entry in map ".concat(i.name,". Got ").concat(s))}}}catch(d){n.e(d)}finally{n.f()}a.loaded=!0}))}return Object(y["a"])(t,[{key:"getAsset",value:function(t,e){if(!(t<0||t>=this.width||e<0||e>=this.height))return this.assets[this.width*e+t]}},{key:"getCharacter",value:function(t,e){if(!(t<0||t>=this.width||e<0||e>=this.height))return this.characters[this.width*e+t]}},{key:"getTile",value:function(t,e){if(!(t<0||t>=this.width||e<0||e>=this.height))return this.tiles[this.width*e+t]}},{key:"updateAsset",value:function(t,e,a,n){var s=this.getAsset(t,e);s&&(s.id=a,s.sprite=n,Et(this.store.state.currentMap,t,e,a))}},{key:"updateCharacter",value:function(t,e,a){var n=this;Mt(this.store.state.currentMap,t,e),Tt(this.store.state.currentMap,a),St(this.store.state.currentMap,t,e,a),this.store.state.characters.getCharacters(this.store.state.currentMap.campaign).then((function(s){var i,r=!1,c=Object(tt["a"])(s);try{for(c.s();!(i=c.n()).done;){var o=i.value;if(o.id===a){for(var l=0;l<n.characters.length;l++){var u=n.characters[l];u&&u.id===o.id&&(n.characters[l]=void 0)}n.characters[n.width*e+t]=o,r=!0}}}catch(A){c.e(A)}finally{c.f()}r||(n.characters[n.width*e+t]=void 0,console.log("[ Map ] Failed to find character ".concat(a," in registry.")))}))}},{key:"updateTile",value:function(t,e,a,n){var s=this.getTile(t,e);s&&(s.id=a,s.sprite=n,_t(this.store.state.currentMap,t,e,a))}},{key:"render",value:function(t){if(this.loaded)for(var e=0;e<this.height;e++)for(var a=0;a<this.width;a++){t.renderTile(this.getTile(a,e)),t.renderTile(this.getAsset(a,e));var n=this.getCharacter(a,e);if(n){var s=this.store.state.entities.getImage(n.entityId);t.renderRawTile(a,e,s)}}}}]),t}(),me=function(){function t(e){Object(r["a"])(this,t),this.store=e,this.cursorLocation=new le}return Object(y["a"])(t,[{key:"update",value:function(t,e,a){if(this.cursorLocation.x=e.mx,this.cursorLocation.y=e.my,t.screenToIndexSpace(this.cursorLocation),e.getClick()){if(this.store.state.editingAssets){var n=a.getAsset(this.cursorLocation.x,this.cursorLocation.y);n&&this.lastAssetEdited!==n&&(a.updateAsset(this.cursorLocation.x,this.cursorLocation.y,this.store.state.selectedAsset,this.store.state.selectedAsset>0?this.store.state.assets.getImage(this.store.state.selectedAsset):void 0),this.lastAssetEdited=n)}else this.lastAssetEdited=void 0;if(this.store.state.editingTiles){var s=a.getTile(this.cursorLocation.x,this.cursorLocation.y);s&&this.lastTileEdited!==s&&a.updateTile(this.cursorLocation.x,this.cursorLocation.y,this.store.state.selectedTile,this.store.state.selectedTile>0?this.store.state.tiles.getImage(this.store.state.selectedTile):void 0)}else this.lastTileEdited=void 0;this.store.state.editingCharacters&&""!==this.store.state.selectedCharacter&&a.updateCharacter(this.cursorLocation.x,this.cursorLocation.y,this.store.state.selectedCharacter)}else this.lastTileEdited=void 0,this.lastAssetEdited=void 0;t.indexToScreenSpace(this.cursorLocation)}},{key:"render",value:function(t){t.renderTileOutline(this.cursorLocation.x,this.cursorLocation.y)}}]),t}(),pe=function(){function t(e){Object(r["a"])(this,t),this.store=e,this.cursorLocation=new le,this.selectedCharacter=void 0}return Object(y["a"])(t,[{key:"update",value:function(t,e,a){this.store.state.characterCache&&(console.log("[ Viewer ] Updating the characters."),a.characters=this.store.state.characterCache,this.store.state.characterCache=void 0),this.cursorLocation.x=e.mx,this.cursorLocation.y=e.my,t.screenToIndexSpace(this.cursorLocation);var n=this.cursorLocation.x,s=this.cursorLocation.y;if("master"===this.store.state.sessionRole||"player"===this.store.state.sessionRole)if(this.selectedCharacter)a.getCharacter(n,s)||(a.updateCharacter(n,s,this.selectedCharacter.id),this.store.dispatch("updateSession",a.characters)),e.getClick()||(this.selectedCharacter=void 0);else if(e.getClick())if("master"===this.store.state.sessionRole)this.selectedCharacter=a.getCharacter(n,s);else if("player"===this.store.state.sessionRole){var i=a.getCharacter(n,s);i&&i.playable&&(this.selectedCharacter=i)}t.indexToScreenSpace(this.cursorLocation)}},{key:"render",value:function(t){"master"!==this.store.state.sessionRole&&"player"!==this.store.state.sessionRole||t.renderTileOutline(this.cursorLocation.x,this.cursorLocation.y)}}]),t}(),ve=function(){function t(e,a){Object(r["a"])(this,t),this.store=e,this.controller=new he,this.screen=new ue,this.map=new de(this.store),this.mutator=a?new me(this.store):new pe(this.store),this.controller.registerEvents()}return Object(y["a"])(t,[{key:"setFocus",value:function(t){this.controller.setFocus(t)}},{key:"update",value:function(t){this.controller.update(t,this.screen.camera),this.mutator.update(this.screen,this.controller,this.map)}},{key:"render",value:function(t){this.store.state.tiles.hasLoaded()&&(this.screen.begin(t),this.map.render(this.screen),this.mutator.render(this.screen),this.screen.end())}},{key:"close",value:function(){}}]),t}(),fe=function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){return Object(r["a"])(this,a),e.apply(this,arguments)}return Object(y["a"])(a,[{key:"mounted",value:function(){var t=this.$refs["map-canvas"];this.context=t.getContext("2d"),this.context.canvas.width=this.context.canvas.clientWidth,this.context.canvas.height=this.context.canvas.clientHeight,window.addEventListener("resize",this.onResize.bind(this),{passive:!0}),this.map=new ve(this.$store,this.editable),this.lastTime=Date.now(),this.requestId=requestAnimationFrame(this.tick.bind(this)),this.register()}},{key:"tick",value:function(t){var e=t-this.lastTime;this.map.update(e),this.lastTime=t,this.map.render(this.context),this.requestId=requestAnimationFrame(this.tick.bind(this))}},{key:"onResize",value:function(t){this.context.canvas.width=this.context.canvas.clientWidth,this.context.canvas.height=this.context.canvas.clientHeight}},{key:"register",value:function(){this.$el.addEventListener("mouseover",this.onFocus.bind(this),{passive:!0}),this.$el.addEventListener("mouseout",this.onBlur.bind(this),{passive:!0})}},{key:"unregister",value:function(){this.$el.removeEventListener("mouseover",this.onFocus.bind(this)),this.$el.removeEventListener("mouseout",this.onBlur.bind(this))}},{key:"onFocus",value:function(){this.map.setFocus(!0)}},{key:"onBlur",value:function(){this.map.setFocus(!1)}}]),a}(u["c"]);l["a"]([Object(u["b"])({default:!1})],fe.prototype,"editable",void 0),fe=l["a"]([Object(u["a"])({name:"MapCanvas",components:{}})],fe);var ge=fe,be=ge,ye=(a("b6bc"),Object(m["a"])(be,se,ie,!1,null,"703cebfc",null)),Ce=ye.exports,ke=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab-bar"},[a("div",{staticClass:"tabs"},t._l(t.tabs,(function(e){return a("Tab",{key:e.name,attrs:{name:e.name,active:e.active,image:e.image},on:{clicked:function(a){return t.onClick(e)}}})})),1),a("div",{staticClass:"content",class:{hidden:!t.tabActive}},[a(t.currentTab,{tag:"component"})],1)])},we=[],Oe=(a("4160"),a("159b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab",class:{highlighted:t.active},on:{click:function(e){return t.$emit("clicked")}}},[t._v(" "+t._s(t.image)+" ")])}),xe=[],je=function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){return Object(r["a"])(this,a),e.apply(this,arguments)}return a}(u["c"]);l["a"]([Object(u["b"])()],je.prototype,"name",void 0),l["a"]([Object(u["b"])()],je.prototype,"active",void 0),l["a"]([Object(u["b"])()],je.prototype,"image",void 0),je=l["a"]([Object(u["a"])({name:"Tab",components:{}})],je);var Ie=je,_e=Ie,Ee=(a("bf2f"),Object(m["a"])(_e,Oe,xe,!1,null,"7bbf027b",null)),Se=Ee.exports,Te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"file-bar"},[a("div",{staticClass:"title"},[t._v("- FILE -")]),a("div",{staticClass:"button",on:{click:function(e){return t.onNew()}}},[t._v("New")]),a("hr",{staticClass:"section"}),a("div",{staticClass:"container"},[a("v-text-field",{attrs:{color:"primary",label:"Name",filled:""},on:{change:t.onNameChanged},model:{value:t.mapName,callback:function(e){t.mapName=e},expression:"mapName"}})],1),a("div",{staticClass:"half-container-container"},[a("div",{staticClass:"half-container"},[a("v-text-field",{attrs:{color:"primary",label:"Width",type:"number",filled:""},on:{change:t.onSizeChanged},model:{value:t.mapWidth,callback:function(e){t.mapWidth=e},expression:"mapWidth"}})],1),a("div",{staticClass:"half-container"},[a("v-text-field",{attrs:{color:"primary",label:"Height",type:"number",filled:""},on:{change:t.onSizeChanged},model:{value:t.mapHeight,callback:function(e){t.mapHeight=e},expression:"mapHeight"}})],1)]),a("div",{staticClass:"button",on:{click:function(e){return t.onSave()}}},[t._v("Save")]),a("hr",{staticClass:"section"}),a("div",{staticClass:"button",on:{click:function(e){return t.onDuplicate()}}},[t._v("Duplicate")]),a("div",{staticClass:"button",on:{click:function(e){return t.onLoad()}}},[t._v("Load")])])},Me=[],Le=function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.mapName="",t.mapWidth=0,t.mapHeight=0,t}return Object(y["a"])(a,[{key:"mounted",value:function(){var t=this.$store.state;this.mapName=t.currentMap.name,this.mapWidth=t.currentMap.width,this.mapHeight=t.currentMap.height}},{key:"onNameChanged",value:function(){console.log("Changing name to: ".concat(this.mapName,"."));var t=this.$store.state;t.currentMap.name=this.mapName,this.$store.dispatch("renameMap")}},{key:"onSizeChanged",value:function(){console.log("Changing size to: ".concat(this.mapWidth,"x").concat(this.mapHeight,"."));var t={width:this.mapWidth,height:this.mapHeight};this.$store.dispatch("resizeMap",t)}},{key:"onNew",value:function(){console.log("Loading a new map..."),this.$store.dispatch("newMap"),this.$router.go(0)}},{key:"onSave",value:function(){console.log("Saving map as: ".concat(this.mapName,"."));var t=this.$store.state;t.currentMap.name=this.mapName,this.$store.dispatch("saveMap")}},{key:"onDuplicate",value:function(){console.log("Duplicating map..."),this.$store.dispatch("duplicateMap"),this.$store.dispatch("saveMap");var t=this.$store.state;this.mapName=t.currentMap.name}},{key:"onLoad",value:function(){console.log("Going to loading screen..."),this.$router.push("/campaign")}}]),a}(u["c"]);Le=l["a"]([Object(u["a"])({name:"FileBar",components:{}})],Le);var Re=Le,Be=Re,Qe=(a("f6db"),Object(m["a"])(Be,Te,Me,!1,null,"30ce5b70",null)),De=Qe.exports,$e=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"scrollable"},[a("div",{staticClass:"tile-bar"},[a("div",{staticClass:"title"},[t._v("- TILE -")]),t._l(Array.from(t.tiles().names.keys()),(function(e){return a("div",{key:e,staticClass:"tile",class:{highlighted:t.selectedIndex===e}},[a("img",{staticClass:"icon",attrs:{src:t.tiles().getImage(e).src,alt:t.tiles().getName(e)},on:{click:function(a){return t.onClick(e)}}})])}))],2)])},Ne=[],Pe=function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.selectedIndex=-1,t}return Object(y["a"])(a,[{key:"tiles",value:function(){return this.$store.state.tiles}},{key:"onClick",value:function(t){var e=this.$store.state;e.selectedTile=t,this.selectedIndex=t,console.log("Selecting tile ".concat(t))}}]),a}(u["c"]);Pe=l["a"]([Object(u["a"])({name:"TileBar",components:{}})],Pe);var Fe=Pe,qe=Fe,Ue=(a("816f"),Object(m["a"])(qe,$e,Ne,!1,null,"31cc7761",null)),Ge=Ue.exports,Je=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"scrollable"},[a("div",{staticClass:"asset-bar"},[a("div",{staticClass:"title"},[t._v("- ASSET -")]),t._l(Array.from(t.assets().names.keys()),(function(e){return a("div",{key:e,staticClass:"asset",class:{highlighted:t.selectedIndex===e}},[a("img",{staticClass:"icon",attrs:{src:t.assets().getImage(e).src,alt:t.assets().getName(e)},on:{click:function(a){return t.onClick(e)}}})])}))],2)])},Ye=[],He=function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.selectedIndex=-1,t}return Object(y["a"])(a,[{key:"assets",value:function(){return this.$store.state.assets}},{key:"onClick",value:function(t){var e=this.$store.state;e.selectedAsset=t,this.selectedIndex=t,console.log("Selecting asset ".concat(t))}}]),a}(u["c"]);He=l["a"]([Object(u["a"])({name:"AssetBar",components:{}})],He);var We=He,ze=We,Ve=(a("3f0b"),Object(m["a"])(ze,Je,Ye,!1,null,"1937b841",null)),Ze=Ve.exports,Ke=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"character-bar"},[a("div",{staticClass:"title"},[t._v("- CHARACTER -")]),a("div",{staticClass:"container"},[a("v-select",{attrs:{outlined:"",items:t.alphabeticalCharacters(),label:"Character Select"},on:{change:t.onChange}})],1),a("hr",{staticClass:"section"}),a("div",{staticClass:"button",on:{click:function(e){return t.$router.push("/character")}}},[t._v("Editor")])])},Xe=[];function ta(){return{discriminator:"spectrum.character",id:"0db32970-247d-4024-a3d3-36af02421e76",name:"Sample Character",entityId:0,campaign:"f06fa64c-c947-4a4e-9700-2cbcd55b27e3",playable:!0}}var ea=function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.characters=[],t.selectedCharacter=-1,t.characterDialog=!0,t}return Object(y["a"])(a,[{key:"alphabeticalCharacters",value:function(){return this.characters.map((function(t){return{text:t.name,value:t.id}}))}},{key:"mounted",value:function(){var t=this,e=this.$store.state;e.characters.getCharacters(e.currentCampaign.id).then((function(e){t.characters=e})).catch((function(e){console.log("[ CharacterBar ] Error: ".concat(e)),t.characters=[ta()]}))}},{key:"onChange",value:function(t){console.log("[ CharacterBar ] Selecting character ".concat(t,"."));var e=this.$store.state;e.selectedCharacter=t}}]),a}(u["c"]);ea=l["a"]([Object(u["a"])({components:{}})],ea);var aa=ea,na=aa,sa=(a("72dd"),Object(m["a"])(na,Ke,Xe,!1,null,"4546701c",null)),ia=sa.exports,ra=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"session-bar"},[a("div",{staticClass:"title"},[t._v("- SESSION -")]),a("div",{staticClass:"button",on:{click:function(e){return t.onCreate()}}},[t._v("Create")])])},ca=[],oa=function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){return Object(r["a"])(this,a),e.apply(this,arguments)}return Object(y["a"])(a,[{key:"mounted",value:function(){}},{key:"onCreate",value:function(){var t=this;this.$store.dispatch("saveMap");var e=this.$store.state;nt.a.get("/createSession",{params:{userId:e.currentUser.id,mapId:e.currentMap.id}}).then((function(a){a.data&&a.data.session&&(e.currentSession=a.data.session,t.$router.push("/viewer"))}))}}]),a}(u["c"]);oa=l["a"]([Object(u["a"])({name:"SessionBar",components:{}})],oa);var la=oa,ua=la,Aa=(a("826d"),Object(m["a"])(ua,ra,ca,!1,null,"7d6688f2",null)),ha=Aa.exports,da=function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.tabs=[],t.currentTab=null,t.tabActive=!1,t}return Object(y["a"])(a,[{key:"mounted",value:function(){this.tabs=[{name:"File",active:!1,image:"F",component:De},{name:"Tiles",active:!1,image:"T",component:Ge},{name:"Assets",active:!1,image:"A",component:Ze},{name:"Characters",active:!1,image:"C",component:ia},{name:"Sessions",active:!1,image:"S",component:ha}]}},{key:"onClick",value:function(t){this.tabs.forEach((function(e){t.name!==e.name&&(e.active=!1)})),t.active?(t.active=!1,this.currentTab=null,this.tabActive=!1):(t.active=!0,this.currentTab=t.component,this.tabActive=!0);var e=this.$store.state;e.editingTiles=this.tabs[1].active,e.editingAssets=this.tabs[2].active,e.editingCharacters=this.tabs[3].active}}]),a}(u["c"]);da=l["a"]([Object(u["a"])({components:{Tab:Se}})],da);var ma=da,pa=ma,va=(a("48e6"),Object(m["a"])(pa,ke,we,!1,null,"3c459dbd",null)),fa=va.exports,ga=function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){return Object(r["a"])(this,a),e.apply(this,arguments)}return a}(u["c"]);ga=l["a"]([Object(u["a"])({name:"Editor",components:{MapCanvas:Ce,TabBar:fa}})],ga);var ba=ga,ya=ba,Ca=(a("e3ce"),Object(m["a"])(ya,ae,ne,!1,null,"109a0010",null)),ka=Ca.exports,wa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",[a("v-system-bar",{attrs:{color:"#444444",absolute:!0,height:t.menuOpen?512:24},on:{click:function(e){t.menuOpen=!t.menuOpen}}},[t.menuOpen?t._e():a("span",{staticClass:"subtitle ml-2"},[t._v("Players ("+t._s(t.players.length)+")")]),t.menuOpen?t._e():a("v-spacer"),t.menuOpen?t._e():a("span",{staticClass:"subtitle"},[t._v(t._s(t.elapsedTime))]),t.menuOpen?t._e():a("v-spacer"),t.menuOpen?t._e():a("span",{attrs:{fclass:"subtitle mr-2"}},[t._v("("+t._s(t.spectators.length)+") Spectators")]),t.menuOpen?a("div",{staticClass:"expanded-menu"},[a("div",{staticClass:"main-col player-list"},[a("h2",[t._v("Players")]),a("div",{staticClass:"scroll"},t._l(t.players,(function(e,n){return a("div",{key:n},[t._v(" "+t._s(e)+" ")])})),0)]),a("div",{staticClass:"main-col status"},[a("h1",[t._v("Session Time")]),a("p",[t._v(t._s(t.elapsedTime))]),a("h1",[t._v("Session Code")]),a("p",[t._v(t._s(t.sessionCode))])]),a("div",{staticClass:"main-col spectator-list"},[a("h2",[t._v("Spectators")]),a("div",{staticClass:"scroll"},t._l(t.spectators,(function(e,n){return a("div",{key:n},[t._v(" "+t._s(e)+" ")])})),0)])]):t._e()],1),void 0!==t.session?[a("MapCanvas",{attrs:{editable:!1}})]:t._e()],2)},Oa=[],xa=function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.startTime=Date.now(),t.elapsedTime="",t.sessionCode="",t.players=[],t.spectators=[],t.menuOpen=!1,t}return Object(y["a"])(a,[{key:"created",value:function(){var t=Object(et["a"])(regeneratorRuntime.mark((function t(){var e,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.$store.state,a=e.currentSession,!a){t.next=21;break}return t.next=5,this.requestMap(a.map);case 5:if(n=t.sent,!n){t.next=10;break}e.currentMap=n,t.next=13;break;case 10:return console.error("[ Viewer ] Unable to retrieve session map."),this.$router.back(),t.abrupt("return");case 13:this.session=a,this.sessionCode=a.playerCode,this.players=a.players,this.spectators=a.spectators,this.startTime=a.dateCreated,setInterval(this.tick.bind(this),1e3),t.next=23;break;case 21:console.error("[ Viewer ] No active session to join."),this.$router.back();case 23:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"requestMap",value:function(){var t=Object(et["a"])(regeneratorRuntime.mark((function t(e){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("[ Viewer ] Requesting map ".concat(e,".")),t.prev=1,t.next=4,nt.a.get("/requestMap",{params:{mapId:e}});case 4:if(a=t.sent,!a.data||!a.data.map){t.next=10;break}if(n=a.data.map,!xt(n)){t.next=10;break}return console.log("[ Viewer ] Got map from server."),t.abrupt("return",n);case 10:t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](1),console.log("[ Viewer ] Error: ".concat(t.t0));case 15:return t.abrupt("return",void 0);case 16:case"end":return t.stop()}}),t,null,[[1,12]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"tick",value:function(){var t=this;this.elapsedTime=this.getElapsed(),nt.a.get("/requestSession",{params:{sessionId:this.session.id}}).then((function(e){var a=t.$store.state;e&&e.data&&(e.data.session&&(t.players=e.data.session.players,t.spectators=e.data.session.spectators),e.data.characters&&(a.characterCache=e.data.characters))}))}},{key:"getElapsed",value:function(){var t=(Date.now()-this.startTime)/1e3,e=Math.floor(t/3600),a=Math.floor((t-3600*e)/60),n=Math.floor(t)-3600*e-60*a;return(e<10?"0"+e:e)+":"+(a<10?"0"+a:a)+":"+(n<10?"0"+n:n)}}]),a}(u["c"]);xa=l["a"]([Object(u["a"])({components:{MapCanvas:Ce}})],xa);var ja=xa,Ia=ja,_a=(a("6ebb"),Object(m["a"])(Ia,wa,Oa,!1,null,"75f21c40",null)),Ea=_a.exports,Sa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",[a("v-toolbar",{attrs:{color:"primary",extended:""},scopedSlots:t._u([{key:"extension",fn:function(){return[a("v-select",{staticClass:"mt-3",attrs:{bottom:"",dense:"",outlined:"",items:t.alphabeticalCharacters,label:"Character Select",loading:t.loading,disabled:t.loading},on:{change:t.onChange}})]},proxy:!0}])},[a("v-tooltip",{attrs:{bottom:"","open-delay":"500","close-delay":"250"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",{attrs:{icon:"",disabled:t.loading},on:{click:function(e){return t.$router.back()}}},[a("v-icon",t._g({},n),[t._v(t._s(t.mdiArrowLeft))])],1)]}}])},[a("span",[t._v("Back")])]),a("v-toolbar-title",[t._v("Character")]),a("v-spacer"),a("v-tooltip",{attrs:{bottom:"","open-delay":"500","close-delay":"250"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",{attrs:{icon:"",disabled:t.loading},on:{click:t.onSave}},[a("v-icon",t._g({},n),[t._v(t._s(t.mdiContentSave))])],1)]}}])},[a("span",[t._v("Save")])]),a("v-tooltip",{attrs:{bottom:"","open-delay":"500","close-delay":"250"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",{attrs:{icon:"",disabled:t.loading},on:{click:t.onDuplicate}},[a("v-icon",t._g({},n),[t._v(t._s(t.mdiContentSaveAll))])],1)]}}])},[a("span",[t._v("Duplicate")])]),a("v-tooltip",{attrs:{bottom:"","open-delay":"500","close-delay":"250"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",{attrs:{icon:"",disabled:t.loading},on:{click:t.onCreate}},[a("v-icon",t._g({},n),[t._v(t._s(t.mdiPlus))])],1)]}}])},[a("span",[t._v("New")])])],1),a("v-content",{staticClass:"fill-height ma-12"},[a("v-row",[a("v-col",{attrs:{cols:"8"}},[a("form",[a("v-text-field",{attrs:{value:t.characterName,label:"Name",disabled:t.formDisabled},on:{change:t.onNameChange}}),a("v-select",{attrs:{value:t.characterImage,items:t.$store.state.entities.names.map((function(e,a){return{text:t.toTitleCase(e),value:a}})),label:"Image",disabled:t.formDisabled},on:{change:t.onImageChange}}),a("v-checkbox",{attrs:{"v-model":t.characterPlayable,label:"Playable?",disabled:t.formDisabled},on:{change:t.onPlayableChange}})],1)]),a("v-col",{attrs:{cols:"4"}},[a("img",{staticClass:"character-image",attrs:{src:t.characterImageSrc,alt:"Character Image"}})])],1)],1)],1)},Ta=[],Ma=(a("d3b7"),a("5319"),function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.characters=[],t.characterName="",t.characterImage=0,t.characterPlayable=!1,t.formDisabled=!0,t.loading=!1,t.characterImageSrc="",t}return Object(y["a"])(a,[{key:"mounted",value:function(){var t=this,e=this.$store.state;e.characters.getCharacters(e.currentCampaign.id).then((function(e){t.characters=e})).catch((function(e){console.log("[ Character ] Error: ".concat(e)),t.characters=[ta()]}))}},{key:"onChange",value:function(t){this.formDisabled=!1,this.selectedCharacter=t,this.characterName=t.name,this.characterImage=t.entityId,this.characterPlayable=t.playable,this.characterImageSrc=this.$store.state.entities.getImage(this.characterImage).src}},{key:"onSave",value:function(){var t=this;this.formDisabled||(this.loading=!0,this.selectedCharacter.name=this.characterName,this.selectedCharacter.entityId=this.characterImage,this.selectedCharacter.playable=this.characterPlayable,console.log("Saving with ".concat(this.selectedCharacter.name,", ").concat(this.selectedCharacter.entityId,", ").concat(this.selectedCharacter.playable)),nt.a.post("/saveCharacter",{character:this.selectedCharacter}).catch((function(){console.error("[ Character ] Failed to save character!")})).finally((function(){t.loading=!1;var e=t.$store.state;e.characters.validateCache(e.currentCampaign.id).then((function(e){t.characters=e})).catch((function(e){console.log("[ Character ] Error: ".concat(e)),t.characters=[ta()]}))})))}},{key:"onDuplicate",value:function(){var t=this;if(!this.formDisabled){var e=this.$store.state;this.loading=!0,this.characterName="New Character";var a={discriminator:"spectrum.character",id:Object(Ut["a"])(),name:this.characterName,entityId:this.characterImage,campaign:e.currentCampaign.id,playable:this.characterPlayable};nt.a.post("/saveCharacter",{character:a}).catch((function(){console.error("[ Character ] Failed to duplicate character!")})).finally((function(){t.loading=!1;var e=t.$store.state;e.characters.validateCache(e.currentCampaign.id).then((function(e){t.characters=e})).catch((function(e){console.log("[ CharacterBar ] Error: ".concat(e)),t.characters=[ta()]}))}))}}},{key:"onCreate",value:function(){this.formDisabled=!1;var t=this.$store.state;this.characterName="New Character",this.characterImage=0,this.characterPlayable=!1,this.selectedCharacter={discriminator:"spectrum.character",id:Object(Ut["a"])(),name:this.characterName,entityId:this.characterImage,campaign:t.currentCampaign.id,playable:this.characterPlayable}}},{key:"onNameChange",value:function(t){this.characterName=t,console.log("value changed ".concat(t,", ").concat(this.characterName))}},{key:"onImageChange",value:function(t){this.characterImage=t,console.log("value changed ".concat(t,", ").concat(this.characterImage)),this.characterImageSrc=this.$store.state.entities.getImage(t).src}},{key:"onPlayableChange",value:function(t){this.characterPlayable=t,console.log("value changed ".concat(t,", ").concat(this.characterPlayable))}},{key:"toTitleCase",value:function(t){return t.toLowerCase().replace("_"," ").replace(/\b(\w)/g,(function(t){return t.toUpperCase()}))}},{key:"alphabeticalCharacters",get:function(){return this.characters.sort((function(t,e){return e.name<t.name?1:-1})).map((function(t){return{text:t.name,value:t}}))}}]),a}(u["c"]));Ma=l["a"]([Object(u["a"])({data:function(){return{mdiPlus:Ft["e"],mdiArrowLeft:Ft["a"],mdiContentSave:Ft["b"],mdiContentSaveAll:Ft["c"]}}})],Ma);var La=Ma,Ra=La,Ba=(a("f1dc"),Object(m["a"])(Ra,Sa,Ta,!1,null,"51534f63",null)),Qa=Ba.exports;n["default"].use(f["a"]);var Da=new f["a"]({routes:[{path:"/",name:"home",component:M},{path:"/about",name:"about",component:D},{path:"/campaign",name:"campaign",component:$t},{path:"/selection",name:"selection",component:Wt},{path:"/session",name:"session",component:ee},{path:"/player",name:"player",component:G},{path:"/spectator",name:"spectator",component:Z},{path:"/editor",name:"editor",component:ka},{path:"/viewer",name:"viewer",component:Ea},{path:"/character",name:"character",component:Qa}]}),$a=(a("cb29"),a("a434"),a("2909")),Na=a("2f62");function Pa(t){return"spectrum.tile"===t.discriminator}var Fa=function(){function t(){Object(r["a"])(this,t),this.names=[],this.images=[],this.loaded=!1}return Object(y["a"])(t,[{key:"init",value:function(){var t=Object(et["a"])(regeneratorRuntime.mark((function t(e){var a,n,s,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,nt.a.get(e);case 2:if(a=t.sent,a.data.tiles){n=Object(tt["a"])(a.data.tiles);try{for(n.s();!(s=n.n()).done;)i=s.value,Pa(i)&&(this.names[i.id]=i.name,r=new Image,r.src=i.image,this.images[i.id]=r)}catch(c){n.e(c)}finally{n.f()}}this.loaded=!0;case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getName",value:function(t){return this.names[t]}},{key:"getImage",value:function(t){return this.images[t]}},{key:"hasLoaded",value:function(){return this.loaded}}]),t}(),qa=function(){function t(){Object(r["a"])(this,t)}return Object(y["a"])(t,null,[{key:"Init",value:function(){t.Canvas=document.createElement("canvas")}},{key:"CreateThumbnail",value:function(e,a,n,s){t.Canvas||(t.Canvas=document.createElement("canvas")),t.Canvas.width=e,t.Canvas.height=a;var i=t.Canvas.getContext("2d");if(i){for(var r=e/n.width,c=a/n.height,o=0;o<n.height;o++)for(var l=0;l<n.width;l++){var u=It(n,l,o),A=s.getImage(u);i.drawImage(A,r*l,c*o,r,c)}return t.Canvas.toDataURL()}return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAsTAAALEwEAmpwYAAABcVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATWVroAAAAenRSTlMAAQIDBAUGBwgJCwwNDxAREhQVFhcZGhseHyAhIiUmJygtLzA1Nzg9P0FGSEpQUlRbXF9lZ2hqbnFzdXZ8foCDiYqMjo+VlpecoKKpq62us7W3uL2+wMPHyczP0NHU1dbY3N3e4OLj5Obo6ert7u/y8/X29/n6+/z9/l5G4FoAAAInSURBVHja7dxXVxRBEIbhWlfEJRhACYJiQEAFBCQZAROyJhQURdRdSSaQpLj167mnLmUGqny/H1A9z/Q53VOn57TInub0J000klIaixoCcm5RQ0AufNMQkNafGgLS/ktDQK6uawhI15aGgPT80RCQG381BGRYNQTkrsaAjGkISOaRhoBkJxIeMiVI2TMNATk6qSEgldMaAnJsRkNAamY1BKTus4aAnPmiISAtS7ufvOQScvG7mYIBj5DLK8YxJA4hHWvGcUscQq5tGMcdcQjptu35iDiE9G4bx6g4hPSXjOOhOITctFvfY3EIuWcdTzIOIfetI39I3EEy49bxNCvuINm8dbw4LO4gR55bx8sycQfJvbKO1+XiDlL1xjqmcuIOcvyddbytEHeQ2jnrmKkSd5D6gnW8rxZ3kOZ56/hwQtxBzi9bx8eT4g5y6Yd1FE6JO0jbqnUU68Qd5Iptz3WhQdxBOjetY6lJ3EGu/7aOr2fFHaRve/8Pyfai6mBJQ0BuH4hjy3+vOqIxIA80CESBAAECBAgQIKn9JwUECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAOaBvAggQIECAAAECBAgQIECAAPl/IYmOBQQIECBAgAABAgQIECBAgAAB4hCyD5cqAQECBAgQIECAAAHCZzwQIECAAAECBAgQIECcQJJthYAAAQLEFyTFtR0IECBAgJDY2QGtwG+USmY7swAAAABJRU5ErkJggg=="}}]),t}();function Ua(){return{discriminator:"spectrum.user",id:"f06fa64c-c947-4a4e-9700-2cbcd55b27e3",name:"SampleUser",email:"sampleuser@gmail.com",password:"hash",dateJoined:new Date(1577862e6)}}a("4ec9"),a("3ca3"),a("ddb0");var Ga=function(){function t(){Object(r["a"])(this,t),this.characters=new Map}return Object(y["a"])(t,[{key:"cacheCharacters",value:function(){var t=Object(et["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("[ CharacterRegistry ] Requesting characters for campaign ".concat(e,".")),t.prev=1,t.next=4,nt.a.get("/requestCharacters",{params:{campaignId:e}});case 4:if(a=t.sent,!a.data||!a.data.characters){t.next=8;break}return this.characters.set(e,a.data.characters),t.abrupt("return",!0);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),console.log("[ CharacterRegistry ] Error getting characters: ".concat(t.t0));case 13:return t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t,this,[[1,10]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"validateCache",value:function(){var t=Object(et["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.cacheCharacters(e);case 2:if(!t.sent){t.next=6;break}if(a=this.characters.get(e),!a){t.next=6;break}return t.abrupt("return",a);case 6:throw new Error("[ CharacterRegistry ] Failed to load characters from ".concat(e,"."));case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getCharacters",value:function(){var t=Object(et["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=this.characters.get(e),!a){t.next=5;break}return t.abrupt("return",a);case 5:return t.next=7,this.cacheCharacters(e);case 7:if(!t.sent){t.next=11;break}if(a=this.characters.get(e),!a){t.next=11;break}return t.abrupt("return",a);case 11:throw new Error("[ CharacterRegistry ] Failed to load characters from ".concat(e,"."));case 12:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}();n["default"].use(Na["b"]);var Ja=new Ga,Ya=new Fa,Ha=new Fa,Wa=new Fa;Object(et["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Ya.init("/requestAssets"),Ha.init("/requestEntities"),Wa.init("/requestTiles"),qa.Init();case 4:case"end":return t.stop()}}),t)})))();var za=new Na["a"]({state:{welcomeMessage:!1,currentMap:Lt(),currentCampaign:qt(),currentUser:Ua(),characters:Ja,entities:Ha,assets:Ya,tiles:Wa,selectedCharacter:"",editingCharacters:!1,selectedTile:0,editingTiles:!1,selectedAsset:0,editingAssets:!1,currentSession:void 0,sessionRole:"spectator",characterCache:void 0},mutations:{},actions:{updateSession:function(t,e){var a=t.state.currentSession;a&&nt.a.post("/updateSession",{sessionId:a.id,characters:e})},resizeMap:function(t,e){var a=t.state,n=a.currentMap,s=n.width*n.height,i=e.width*e.height;n.width=e.width,n.height=e.height,i>=s?(n.tiles=[].concat(Object($a["a"])(n.tiles),Object($a["a"])(new Array(i-s).fill(1))),n.assets=[].concat(Object($a["a"])(n.assets),Object($a["a"])(new Array(i-s).fill(0)))):(n.tiles=n.tiles.splice(0,i),n.assets=n.assets.splice(0,i));var r=a.tiles,c=qa.CreateThumbnail(200,200,n,r);n.thumbnail=c,n.campaign=a.currentCampaign.id,nt.a.post("/saveMap",{map:n})},renameMap:function(t){var e=t.state,a=e.currentMap;nt.a.post("/saveMap",{map:a})},saveMap:function(t){var e=t.state;console.log("[ Store ] Saving map ".concat(e.currentMap.name,"."));var a=e.currentMap,n=e.tiles,s=qa.CreateThumbnail(200,200,a,n);a.thumbnail=s,a.campaign=e.currentCampaign.id,nt.a.post("/saveMap",{map:a})},duplicateMap:function(t){var e=t.state;console.log("[ Store ] Duplicating current map ".concat(e.currentMap.name,"."));var a=e.currentMap;a.name="Copy of ".concat(a.name),a.id=Object(Ut["a"])(),a.campaign=e.currentCampaign.id}},modules:{}}),Va=a("ce5b"),Za=a.n(Va);a("bf40");n["default"].use(Za.a);var Ka=new Za.a({icons:{iconfont:"mdiSvg"},theme:{dark:!0,themes:{light:{primary:"#cccccc",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"},dark:{primary:"#333333",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}});n["default"].config.productionTip=!1,new n["default"]({router:Da,store:za,vuetify:Ka,render:function(t){return t(v)}}).$mount("#app")},d1f0:function(t,e,a){"use strict";var n=a("2e73"),s=a.n(n);s.a},e3ce:function(t,e,a){"use strict";var n=a("1df2"),s=a.n(n);s.a},f1dc:function(t,e,a){"use strict";var n=a("9c9f"),s=a.n(n);s.a},f6db:function(t,e,a){"use strict";var n=a("0f68"),s=a.n(n);s.a},ff64:function(t,e,a){}});
//# sourceMappingURL=app.f80bc5b1.js.map