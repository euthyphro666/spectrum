(function(t){function e(e){for(var n,i,r=e[0],c=e[1],o=e[2],h=0,l=[];h<r.length;h++)i=r[h],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&l.push(a[i][0]),a[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(l.length)l.shift()();return s.push.apply(s,o||[]),A()}function A(){for(var t,e=0;e<s.length;e++){for(var A=s[e],n=!0,r=1;r<A.length;r++){var c=A[r];0!==a[c]&&(n=!1)}n&&(s.splice(e--,1),t=i(i.s=A[0]))}return t}var n={},a={app:0},s=[];function i(e){if(n[e])return n[e].exports;var A=n[e]={i:e,l:!1,exports:{}};return t[e].call(A.exports,A,A.exports,i),A.l=!0,A.exports}i.m=t,i.c=n,i.d=function(t,e,A){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:A})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var A=Object.create(null);if(i.r(A),Object.defineProperty(A,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(A,n,function(e){return t[e]}.bind(null,n));return A},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var o=0;o<r.length;o++)e(r[o]);var u=c;s.push([0,"chunk-vendors"]),A()})({0:function(t,e,A){t.exports=A("cd49")},"034f":function(t,e,A){"use strict";var n=A("8a23"),a=A.n(n);a.a},"08df":function(t,e,A){"use strict";var n=A("c813"),a=A.n(n);a.a},"166c":function(t,e,A){},"1fae":function(t,e,A){"use strict";var n=A("822b"),a=A.n(n);a.a},"25ba":function(t,e,A){},"267c":function(t,e,A){},"320e":function(t,e,A){"use strict";var n=A("fdc0"),a=A.n(n);a.a},"37bc":function(t,e,A){"use strict";var n=A("991b"),a=A.n(n);a.a},"428b":function(t,e,A){"use strict";var n=A("48f7"),a=A.n(n);a.a},"46b7":function(t,e,A){},"48f7":function(t,e,A){},"4ede":function(t,e,A){},5789:function(t,e,A){"use strict";var n=A("d3a8"),a=A.n(n);a.a},"5c05":function(t,e,A){"use strict";var n=A("4ede"),a=A.n(n);a.a},"681a":function(t,e,A){"use strict";var n=A("46b7"),a=A.n(n);a.a},"6d68":function(t,e,A){"use strict";var n=A("83b8"),a=A.n(n);a.a},"7f60":function(t,e,A){"use strict";var n=A("9b5c"),a=A.n(n);a.a},"822b":function(t,e,A){},"83b8":function(t,e,A){},"89b9":function(t,e,A){"use strict";var n=A("8c21"),a=A.n(n);a.a},"8a23":function(t,e,A){},"8c21":function(t,e,A){},"991b":function(t,e,A){},"9aad":function(t,e,A){"use strict";var n=A("267c"),a=A.n(n);a.a},"9b5c":function(t,e,A){},"9bf9":function(t,e,A){"use strict";var n=A("25ba"),a=A.n(n);a.a},a1a2:function(t,e,A){},bf2f:function(t,e,A){"use strict";var n=A("166c"),a=A.n(n);a.a},c813:function(t,e,A){},cd49:function(t,e,A){"use strict";A.r(e);A("e260"),A("e6cf"),A("cca6"),A("a79d");var n=A("2b0e"),a=function(){var t=this,e=t.$createElement,A=t._self._c||e;return A("div",{staticClass:"base"},[t._v(" Hellow ")])},s=[],i=A("d4ec"),r=A("99de"),c=A("7e84"),o=A("262e"),u=A("9ab4"),h=A("60a3"),l=function(t){function e(){return Object(i["a"])(this,e),Object(r["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(o["a"])(e,t),e}(h["c"]);l=u["a"]([Object(h["a"])({components:{}})],l);var d=l,f=d,v=(A("034f"),A("2877")),m=Object(v["a"])(f,a,s,!1,null,null,null),b=m.exports,p=A("8c4f"),y=function(){var t=this,e=t.$createElement,A=t._self._c||e;return A("div",{staticClass:"home"},[A("div",{staticClass:"master-selection",on:{click:function(e){return t.onSelection("/master")}}},[A("h1",[t._v("Game Master")])]),A("div",{staticClass:"player-selection",on:{click:function(e){return t.onSelection("/player")}}},[A("h1",[t._v("Player")])]),A("div",{staticClass:"spectator-selection",on:{click:function(e){return t.onSelection("/spectator")}}},[A("h1",[t._v("Spectator")])]),A("DialogueBox",{attrs:{title:"Welcome",message:"Spectrum is currently in alpha. Expect things to break or not work in the first place. If you have any suggestions or feedback feel free to email joshhess13@gmail.com.",hidden:t.showDialogue},on:{confirmed:t.onDialogue}})],1)},g=[],O=A("bee2"),j=function(){var t=this,e=t.$createElement,A=t._self._c||e;return A("div",{staticClass:"dialogue-background",class:{hidden:t.hidden}},[A("div",{staticClass:"dialogue-box"},[A("h1",[t._v(t._s(t.title))]),A("h2",[t._v(t._s(t.message))]),A("div",{staticClass:"dialogue-button",on:{click:function(e){t.hidden=!0,t.$emit("confirmed")}}},[A("h2",[t._v("Confirm")])])])])},k=[],C=function(t){function e(){return Object(i["a"])(this,e),Object(r["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(o["a"])(e,t),e}(h["c"]);C=u["a"]([Object(h["a"])({name:"DialogueBox",components:{},props:{title:String,message:String,hidden:String}})],C);var x=C,E=x,I=(A("08df"),Object(v["a"])(E,j,k,!1,null,"11dabef2",null)),w=I.exports,_=function(t){function e(){var t;return Object(i["a"])(this,e),t=Object(r["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.showDialogue=!1,t}return Object(o["a"])(e,t),Object(O["a"])(e,[{key:"mounted",value:function(){this.showDialogue=this.$store.state.welcomeMessage}},{key:"onDialogue",value:function(){this.$store.state.welcomeMessage=!0,this.showDialogue=!0}},{key:"onSelection",value:function(t){this.$router.push(t)}}]),e}(h["c"]);_=u["a"]([Object(h["a"])({name:"Home",components:{DialogueBox:w}})],_);var Q=_,S=Q,B=(A("5789"),Object(v["a"])(S,y,g,!1,null,"427ac6b2",null)),T=B.exports,M=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},L=[function(){var t=this,e=t.$createElement,A=t._self._c||e;return A("div",{staticClass:"about"},[A("h1",[t._v("This is an about page")])])}],P={},R=Object(v["a"])(P,M,L,!1,null,null,null),F=R.exports,D=function(){var t=this,e=t.$createElement,A=t._self._c||e;return A("div",{staticClass:"master"},[A("InfoBar",{attrs:{title:"Maps",subtitle:"Example Campaign"}}),A("div",{staticClass:"content"},[t._m(0),A("div",{staticClass:"templates"},t._l(t.templates,(function(e){return A("TemplateCard",{key:e.id,attrs:{title:e.name,thumbnail:e.thumbnail},on:{load:function(A){return t.load(e)}}})})),1),t._m(1),A("div",{staticClass:"body"},t._l(t.maps,(function(e){return A("MapCard",{key:e.id,attrs:{title:e.name,thumbnail:e.thumbnail},on:{load:function(A){return t.load(e)}}})})),1)])],1)},J=[function(){var t=this,e=t.$createElement,A=t._self._c||e;return A("div",{staticClass:"template-header"},[A("h1",[t._v("Start a new map")])])},function(){var t=this,e=t.$createElement,A=t._self._c||e;return A("div",{staticClass:"body-header"},[A("h1",[t._v("Recent maps")])])}],U=(A("b0c0"),A("96cf"),A("1da1")),$=function(){var t=this,e=t.$createElement,A=t._self._c||e;return A("div",{staticClass:"info-bar"},[A("h1",{staticClass:"left"},[t._v(t._s(t.title))]),A("div",{staticClass:"search"},[t._v(t._s(t.search))]),A("h1",{staticClass:"right"},[t._v(t._s(t.subtitle))])])},G=[],Y=(A("ac1f"),A("841c"),function(t){function e(){var t;return Object(i["a"])(this,e),t=Object(r["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.search="Search",t}return Object(o["a"])(e,t),e}(h["c"]));Y=u["a"]([Object(h["a"])({name:"InfoBar",components:{},props:{title:String,subtitle:String}})],Y);var q=Y,N=q,z=(A("d1f0"),Object(v["a"])(N,$,G,!1,null,"cec287b6",null)),K=z.exports,V=function(){var t=this,e=t.$createElement,A=t._self._c||e;return A("div",{staticClass:"map-card",on:{click:function(e){return t.$emit("load")}}},[A("div",{staticClass:"thumb"},[A("img",{attrs:{src:t.thumbnail,alt:t.title}})]),A("h1",[t._v(t._s(t.title))])])},H=[],Z=function(t){function e(){return Object(i["a"])(this,e),Object(r["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(o["a"])(e,t),e}(h["c"]);Z=u["a"]([Object(h["a"])({name:"MapCard",components:{},props:{title:String,thumbnail:String}})],Z);var W=Z,X=W,tt=(A("681a"),Object(v["a"])(X,V,H,!1,null,"13dd004e",null)),et=tt.exports,At=function(){var t=this,e=t.$createElement,A=t._self._c||e;return A("div",{staticClass:"template-card",on:{click:function(e){return t.$emit("load")}}},[A("div",{staticClass:"thumb"},[A("img",{attrs:{src:t.thumbnail,alt:t.title}})]),A("h1",[t._v(t._s(t.title))])])},nt=[],at=function(t){function e(){return Object(i["a"])(this,e),Object(r["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(o["a"])(e,t),e}(h["c"]);at=u["a"]([Object(h["a"])({name:"TemplateCard",components:{},props:{title:String,thumbnail:String}})],at);var st=at,it=st,rt=(A("89b9"),Object(v["a"])(it,At,nt,!1,null,"e4a21486",null)),ct=rt.exports,ot=A("bc3a"),ut=A.n(ot),ht=function(t){function e(){var t;return Object(i["a"])(this,e),t=Object(r["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.templates=[],t.maps=[],t}return Object(o["a"])(e,t),Object(O["a"])(e,[{key:"mounted",value:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.requestMaps("Example").then((function(){return e.requestTemplates()})).catch((function(t){console.log("[ Master ] Error:${error}")}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"requestMaps",value:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(e){var A;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("[ Master ] Requesting maps for group ".concat(e,".")),t.prev=1,t.next=4,ut.a.get("/requestMaps",{params:{groupId:e}});case 4:A=t.sent,A.data&&A.data.maps&&(this.maps=A.data.maps),t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](1);case 10:case"end":return t.stop()}}),t,this,[[1,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"requestTemplates",value:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ut.a.get("/requestTemplates");case 3:e=t.sent,console.log("[ Master ] Got request templates. ".concat(JSON.stringify(e.data))),e.data&&e.data.templates&&(this.templates=e.data.templates),t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"load",value:function(t){console.log("[ Master ] Got load template request for ".concat(t.name,".")),this.$store.state.currentMap=t,this.$router.push("editor")}}]),e}(h["c"]);ht=u["a"]([Object(h["a"])({name:"Master",components:{InfoBar:K,MapCard:et,TemplateCard:ct}})],ht);var lt=ht,dt=lt,ft=(A("37bc"),Object(v["a"])(dt,D,J,!1,null,"37c80644",null)),vt=ft.exports,mt=function(){var t=this,e=t.$createElement,A=t._self._c||e;return A("div",{staticClass:"player"})},bt=[],pt=function(t){function e(){return Object(i["a"])(this,e),Object(r["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(o["a"])(e,t),e}(h["c"]);pt=u["a"]([Object(h["a"])({name:"Player",components:{}})],pt);var yt=pt,gt=yt,Ot=(A("9aad"),Object(v["a"])(gt,mt,bt,!1,null,"6641f362",null)),jt=Ot.exports,kt=function(){var t=this,e=t.$createElement,A=t._self._c||e;return A("div",{staticClass:"spectator"})},Ct=[],xt=function(t){function e(){return Object(i["a"])(this,e),Object(r["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(o["a"])(e,t),e}(h["c"]);xt=u["a"]([Object(h["a"])({name:"Spectator",components:{}})],xt);var Et=xt,It=Et,wt=(A("5c05"),Object(v["a"])(It,kt,Ct,!1,null,"600f29fe",null)),_t=wt.exports,Qt=function(){var t=this,e=t.$createElement,A=t._self._c||e;return A("div",{staticClass:"editor"},[A("MapCanvas"),A("TabBar"),A("v-text-field",{attrs:{label:"Solo",placeholder:"Placeholder",solo:""}})],1)},St=[],Bt=function(){var t=this,e=t.$createElement,A=t._self._c||e;return A("div",{staticClass:"root"},[A("canvas",{ref:"map-canvas"})])},Tt=[],Mt=(A("d81d"),A("4c53"),function(){function t(){Object(i["a"])(this,t),this.x=0,this.y=0,this.s=1}return Object(O["a"])(t,[{key:"move",value:function(t,e){this.x+=t/this.s,this.y+=e/this.s}},{key:"zoom",value:function(t){this.s+=t,this.s<.5?this.s=.5:this.s>10&&(this.s=10)}}]),t}()),Lt=Mt,Pt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(i["a"])(this,t),this.x=e,this.y=A}return Object(O["a"])(t,[{key:"add",value:function(t,e){return this.x+=t,this.y+=e,this}},{key:"addV",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"sub",value:function(t,e){return this.x-=t,this.y-=e,this}},{key:"subV",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:"multiply",value:function(t){return this.x*=t,this.y*=t,this}},{key:"divide",value:function(t){return this.x/=t,this.y/=t,this}},{key:"floorDivide",value:function(t){return this.x=Math.floor(this.x/t),this.y=Math.floor(this.y/t),this}}]),t}(),Rt=Pt,Ft=function(){function t(){Object(i["a"])(this,t),this.camera=new Lt}return Object(O["a"])(t,[{key:"begin",value:function(t){this.context=t,this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height),this.context.strokeStyle="#e4f03d",this.context.lineWidth=3,this.context.beginPath()}},{key:"end",value:function(){this.context&&this.context.stroke(),this.context=void 0}},{key:"renderTile",value:function(e){this.context?this.context.drawImage(e.sprite,(e.x*t.TILE_SIZE+this.camera.x)*this.camera.s,(e.y*t.TILE_SIZE+this.camera.y)*this.camera.s,t.TILE_SIZE*this.camera.s,t.TILE_SIZE*this.camera.s):console.log("[ Screen ] Begin has not been called yet this frame.")}},{key:"renderTileOutline",value:function(e,A){var n=new Rt(0,0);return this.context?this.context.rect(e,A,t.TILE_SIZE*this.camera.s,t.TILE_SIZE*this.camera.s):console.log("[ Screen ] Begin has not been called yet this frame."),n}},{key:"screenToWorldSpace",value:function(t){return t.divide(this.camera.s).sub(this.camera.x,this.camera.y)}},{key:"worldToScreenSpace",value:function(t){return t.divide(this.camera.s).sub(this.camera.x,this.camera.y)}},{key:"screenToIndexSpace",value:function(e){return e.divide(this.camera.s).sub(this.camera.x,this.camera.y).floorDivide(t.TILE_SIZE)}},{key:"indexToScreenSpace",value:function(e){return e.multiply(t.TILE_SIZE).add(this.camera.x,this.camera.y).multiply(this.camera.s)}}]),t}();Ft.TILE_SIZE=64;var Dt=function(){function t(){Object(i["a"])(this,t),this.hasFocus=!1,this.upPressed=!1,this.downPressed=!1,this.leftPressed=!1,this.rightPressed=!1,this.panPressed=!1,this.clickDown=!1,this.mdx=0,this.mdy=0,this.mlx=0,this.mly=0,this.ds=0,this.mx=0,this.my=0}return Object(O["a"])(t,[{key:"setFocus",value:function(t){this.hasFocus=t,this.hasFocus||(this.hasFocus=!1,this.upPressed=!1,this.downPressed=!1,this.leftPressed=!1,this.rightPressed=!1,this.panPressed=!1,this.clickDown=!1,this.mdx=0,this.mdy=0,this.mlx=0,this.mly=0,this.ds=0,this.mx=0,this.my=0)}},{key:"getClick",value:function(){return this.clickDown}},{key:"update",value:function(t,e){if(this.hasFocus){var A=5,n=this.leftPressed?this.rightPressed?0:-A:this.rightPressed?A:0,a=this.upPressed?this.downPressed?0:-A:this.downPressed?A:0;n+=this.mdx,a+=this.mdy,this.mdx=0,this.mdy=0,e.move(-n,-a),e.zoom(this.ds),this.ds=0}}},{key:"registerEvents",value:function(){document.addEventListener("keydown",this.onKeyDown.bind(this),{passive:!0}),document.addEventListener("keyup",this.onKeyUp.bind(this),{passive:!0}),document.addEventListener("mousedown",this.onMouseDown.bind(this),{passive:!0}),document.addEventListener("mousemove",this.onMouseMove.bind(this),{passive:!0}),document.addEventListener("mouseup",this.onMouseUp.bind(this),{passive:!0}),document.addEventListener("wheel",this.onScroll.bind(this),{passive:!0})}},{key:"unRegisterEvents",value:function(){document.removeEventListener("keydown",this.onKeyDown.bind(this)),document.removeEventListener("keyup",this.onKeyUp.bind(this))}},{key:"onKeyDown",value:function(t){this.hasFocus&&(65===t.keyCode||37===t.keyCode?this.leftPressed=!0:87===t.keyCode||38===t.keyCode?this.upPressed=!0:83===t.keyCode||40===t.keyCode?this.downPressed=!0:68!==t.keyCode&&39!==t.keyCode||(this.rightPressed=!0))}},{key:"onKeyUp",value:function(t){this.hasFocus&&(65===t.keyCode||37===t.keyCode?this.leftPressed=!1:87===t.keyCode||38===t.keyCode?this.upPressed=!1:83===t.keyCode||40===t.keyCode?this.downPressed=!1:68!==t.keyCode&&39!==t.keyCode||(this.rightPressed=!1))}},{key:"onMouseDown",value:function(t){this.hasFocus&&((t.shiftKey||1===t.button)&&(this.panPressed=!0,this.mlx=t.screenX,this.mly=t.screenY),1!=t.button&&(this.clickDown=!0))}},{key:"onMouseMove",value:function(t){this.hasFocus&&(this.mx=t.clientX,this.my=t.clientY,this.panPressed&&(this.mdx+=this.mlx-t.screenX,this.mdy+=this.mly-t.screenY,this.mlx=t.screenX,this.mly=t.screenY))}},{key:"onMouseUp",value:function(t){this.hasFocus&&(this.panPressed=!1,this.clickDown=!1)}},{key:"onScroll",value:function(t){this.hasFocus&&(this.ds-=t.deltaY/1e3)}}]),t}(),Jt=Dt;function Ut(t,e,A){return t.tiles[A*t.width+e]}function $t(t,e,A,n){t.tiles[A*t.width+e]=n}function Gt(){return{discriminator:"spectrum.map",id:"d10c2776-cc1b-402f-b87c-46da711c4da6",name:"Default Map",thumbnail:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAsTAAALEwEAmpwYAAABcVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATWVroAAAAenRSTlMAAQIDBAUGBwgJCwwNDxAREhQVFhcZGhseHyAhIiUmJygtLzA1Nzg9P0FGSEpQUlRbXF9lZ2hqbnFzdXZ8foCDiYqMjo+VlpecoKKpq62us7W3uL2+wMPHyczP0NHU1dbY3N3e4OLj5Obo6ert7u/y8/X29/n6+/z9/l5G4FoAAAInSURBVHja7dxXVxRBEIbhWlfEJRhACYJiQEAFBCQZAROyJhQURdRdSSaQpLj167mnLmUGqny/H1A9z/Q53VOn57TInub0J000klIaixoCcm5RQ0AufNMQkNafGgLS/ktDQK6uawhI15aGgPT80RCQG381BGRYNQTkrsaAjGkISOaRhoBkJxIeMiVI2TMNATk6qSEgldMaAnJsRkNAamY1BKTus4aAnPmiISAtS7ufvOQScvG7mYIBj5DLK8YxJA4hHWvGcUscQq5tGMcdcQjptu35iDiE9G4bx6g4hPSXjOOhOITctFvfY3EIuWcdTzIOIfetI39I3EEy49bxNCvuINm8dbw4LO4gR55bx8sycQfJvbKO1+XiDlL1xjqmcuIOcvyddbytEHeQ2jnrmKkSd5D6gnW8rxZ3kOZ56/hwQtxBzi9bx8eT4g5y6Yd1FE6JO0jbqnUU68Qd5Iptz3WhQdxBOjetY6lJ3EGu/7aOr2fFHaRve/8Pyfai6mBJQ0BuH4hjy3+vOqIxIA80CESBAAECBAgQIKn9JwUECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAOaBvAggQIECAAAECBAgQIECAAPl/IYmOBQQIECBAgAABAgQIECBAgAAB4hCyD5cqAQECBAgQIECAAAHCZzwQIECAAAECBAgQIECcQJJthYAAAQLEFyTFtR0IECBAgJDY2QGtwG+USmY7swAAAABJRU5ErkJggg==",height:16,width:16,tiles:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}}var Yt=function(){function t(e){Object(i["a"])(this,t),this.store=e;var A=e.state.tiles,n=e.state.currentMap;this.width=n.width,this.height=n.height,this.tiles=new Array(this.width*this.height);for(var a=0;a<this.height;a++)for(var s=0;s<this.width;s++){var r=Ut(n,s,a);this.tiles[this.width*a+s]={id:r,sprite:A.getImage(r),x:s,y:a}}}return Object(O["a"])(t,[{key:"getTile",value:function(t,e){if(!(t<0||t>=this.width||e<0||e>=this.height))return this.tiles[this.width*e+t]}},{key:"updateTile",value:function(t,e,A,n){var a=this.getTile(t,e);a&&(a.id=A,a.sprite=n,$t(this.store.state.currentMap,t,e,A))}},{key:"render",value:function(t){for(var e=0;e<this.height;e++)for(var A=0;A<this.width;A++)t.renderTile(this.getTile(A,e))}}]),t}(),qt=function(){function t(e){Object(i["a"])(this,t),this.store=e,this.cursorLocation=new Rt}return Object(O["a"])(t,[{key:"update",value:function(t,e,A){if(this.cursorLocation.x=e.mx,this.cursorLocation.y=e.my,t.screenToIndexSpace(this.cursorLocation),e.getClick()){var n=A.getTile(this.cursorLocation.x,this.cursorLocation.y);n&&this.store.state.selected&&this.lastTileEdited!==n&&(A.updateTile(this.cursorLocation.x,this.cursorLocation.y,this.store.state.selected,this.store.state.tiles.getImage(this.store.state.selected)),this.lastTileEdited=n)}else this.lastTileEdited=void 0;t.indexToScreenSpace(this.cursorLocation)}},{key:"render",value:function(t){t.renderTileOutline(this.cursorLocation.x,this.cursorLocation.y)}}]),t}(),Nt=function(){function t(e){Object(i["a"])(this,t),this.store=e,this.controller=new Jt,this.screen=new Ft,this.map=new Yt(this.store),this.editor=new qt(this.store),this.controller.registerEvents()}return Object(O["a"])(t,[{key:"setFocus",value:function(t){this.controller.setFocus(t)}},{key:"update",value:function(t){this.controller.update(t,this.screen.camera),this.editor.update(this.screen,this.controller,this.map)}},{key:"render",value:function(t){this.store.state.tiles.hasLoaded()&&(this.screen.begin(t),this.map.render(this.screen),this.editor.render(this.screen),this.screen.end())}},{key:"close",value:function(){}}]),t}(),zt=function(t){function e(){return Object(i["a"])(this,e),Object(r["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(o["a"])(e,t),Object(O["a"])(e,[{key:"mounted",value:function(){var t=this.$refs["map-canvas"];this.context=t.getContext("2d"),this.context.canvas.width=this.context.canvas.clientWidth,this.context.canvas.height=this.context.canvas.clientHeight,window.addEventListener("resize",this.onResize.bind(this),{passive:!0}),this.map=new Nt(this.$store),this.lastTime=Date.now(),this.requestId=requestAnimationFrame(this.tick.bind(this)),this.register()}},{key:"tick",value:function(t){var e=t-this.lastTime;this.map.update(e),this.lastTime=t,this.map.render(this.context),this.requestId=requestAnimationFrame(this.tick.bind(this))}},{key:"onResize",value:function(t){this.context.canvas.width=this.context.canvas.clientWidth,this.context.canvas.height=this.context.canvas.clientHeight}},{key:"register",value:function(){this.$el.addEventListener("mouseover",this.onFocus.bind(this),{passive:!0}),this.$el.addEventListener("mouseout",this.onBlur.bind(this),{passive:!0})}},{key:"unregister",value:function(){this.$el.removeEventListener("mouseover",this.onFocus.bind(this)),this.$el.removeEventListener("mouseout",this.onBlur.bind(this))}},{key:"onFocus",value:function(){this.map.setFocus(!0)}},{key:"onBlur",value:function(){this.map.setFocus(!1)}}]),e}(h["c"]);zt=u["a"]([Object(h["a"])({name:"MapCanvas",components:{}})],zt);var Kt=zt,Vt=Kt,Ht=(A("1fae"),Object(v["a"])(Vt,Bt,Tt,!1,null,"a92fd6f6",null)),Zt=Ht.exports,Wt=function(){var t=this,e=t.$createElement,A=t._self._c||e;return A("div",{staticClass:"tab-bar"},[A("div",{staticClass:"tabs"},t._l(t.tabs,(function(e){return A("Tab",{key:e.name,attrs:{name:e.name,active:e.active,image:e.image},on:{clicked:function(A){return t.onClick(e)}}})})),1),A("div",{staticClass:"content",class:{hidden:!t.tabActive}},[A(t.currentTab,{tag:"component"})],1)])},Xt=[],te=(A("4160"),A("159b"),function(){var t=this,e=t.$createElement,A=t._self._c||e;return A("div",{staticClass:"tab",class:{highlighted:t.active},on:{click:function(e){return t.$emit("clicked")}}},[t._v(" "+t._s(t.image)+" ")])}),ee=[],Ae=function(t){function e(){return Object(i["a"])(this,e),Object(r["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(o["a"])(e,t),e}(h["c"]);u["a"]([Object(h["b"])()],Ae.prototype,"name",void 0),u["a"]([Object(h["b"])()],Ae.prototype,"active",void 0),u["a"]([Object(h["b"])()],Ae.prototype,"image",void 0),Ae=u["a"]([Object(h["a"])({name:"Tab",components:{}})],Ae);var ne=Ae,ae=ne,se=(A("bf2f"),Object(v["a"])(ae,te,ee,!1,null,"7bbf027b",null)),ie=se.exports,re=function(){var t=this,e=t.$createElement,A=t._self._c||e;return A("div",{staticClass:"file-bar"},[A("div",{staticClass:"title"},[t._v("- FILE -")]),A("div",{staticClass:"button"},[t._v("New")]),A("div",{staticClass:"button",on:{click:function(e){return t.onSave()}}},[t._v("Save")]),A("div",{staticClass:"button"},[t._v("Save As")]),A("div",{staticClass:"button"},[t._v("Load")])])},ce=[],oe=function(t){function e(){return Object(i["a"])(this,e),Object(r["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(o["a"])(e,t),Object(O["a"])(e,[{key:"onSave",value:function(){this.$store.dispatch("saveMap")}}]),e}(h["c"]);oe=u["a"]([Object(h["a"])({name:"FileBar",components:{}})],oe);var ue=oe,he=ue,le=(A("428b"),Object(v["a"])(he,re,ce,!1,null,"c6b9f52c",null)),de=le.exports,fe=function(){var t=this,e=t.$createElement,A=t._self._c||e;return A("div",{staticClass:"scrollable"},[A("div",{staticClass:"tile-bar"},t._l(Array.from(t.tiles().names.keys()),(function(e){return A("div",{key:e,staticClass:"tile"},[A("img",{attrs:{src:t.tiles().getImage(e).src,alt:t.tiles().getName(e)},on:{click:function(A){return t.onClick(e)}}})])})),0)])},ve=[],me=function(t){function e(){return Object(i["a"])(this,e),Object(r["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(o["a"])(e,t),Object(O["a"])(e,[{key:"tiles",value:function(){return this.$store.state.tiles}},{key:"onClick",value:function(t){var e=this.$store;e.state.selected=t}}]),e}(h["c"]);me=u["a"]([Object(h["a"])({name:"TileBar",components:{}})],me);var be=me,pe=be,ye=(A("7f60"),Object(v["a"])(pe,fe,ve,!1,null,"0d5c0f66",null)),ge=ye.exports,Oe=function(){var t=this,e=t.$createElement,A=t._self._c||e;return A("div",{staticClass:"asset-bar"})},je=[],ke=function(t){function e(){return Object(i["a"])(this,e),Object(r["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(o["a"])(e,t),e}(h["c"]);ke=u["a"]([Object(h["a"])({name:"AssetBar",components:{}})],ke);var Ce=ke,xe=Ce,Ee=(A("320e"),Object(v["a"])(xe,Oe,je,!1,null,"794fc71a",null)),Ie=Ee.exports,we=function(t){function e(){var t;return Object(i["a"])(this,e),t=Object(r["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.tabs=[],t.currentTab=null,t.tabActive=!1,t}return Object(o["a"])(e,t),Object(O["a"])(e,[{key:"mounted",value:function(){this.tabs=[{name:"File",active:!1,image:"F",component:de},{name:"Tiles",active:!1,image:"T",component:ge},{name:"Assets",active:!1,image:"A",component:Ie},{name:"Forum",active:!1,image:"C",component:Ie}]}},{key:"onClick",value:function(t){this.tabs.forEach((function(e){t.name!==e.name&&(e.active=!1)})),t.active?(t.active=!1,this.currentTab=null,this.tabActive=!1):(t.active=!0,this.currentTab=t.component,this.tabActive=!0)}}]),e}(h["c"]);we=u["a"]([Object(h["a"])({name:"TabBar",components:{Tab:ie}})],we);var _e=we,Qe=_e,Se=(A("9bf9"),Object(v["a"])(Qe,Wt,Xt,!1,null,"5bb6a2d8",null)),Be=Se.exports,Te=function(t){function e(){return Object(i["a"])(this,e),Object(r["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(o["a"])(e,t),e}(h["c"]);Te=u["a"]([Object(h["a"])({name:"Editor",components:{MapCanvas:Zt,TabBar:Be}})],Te);var Me=Te,Le=Me,Pe=(A("6d68"),A("6544")),Re=A.n(Pe),Fe=A("8654"),De=Object(v["a"])(Le,Qt,St,!1,null,"44d231f9",null),Je=De.exports;Re()(De,{VTextField:Fe["a"]}),n["a"].use(p["a"]);var Ue=new p["a"]({routes:[{path:"/",name:"home",component:T},{path:"/about",name:"about",component:F},{path:"/master",name:"master",component:vt},{path:"/player",name:"player",component:jt},{path:"/spectator",name:"spectator",component:_t},{path:"/editor",name:"editor",component:Je}]}),$e=A("2f62");A("a4d3"),A("e01a"),A("d28b"),A("d3b7"),A("3ca3"),A("ddb0");function Ge(t){return"spectrum.tile"===t.discriminator}var Ye=function(){function t(){Object(i["a"])(this,t),this.names=[],this.images=[],this.loaded=!1}return Object(O["a"])(t,[{key:"init",value:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e,A,n,a,s,i,r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ut.a.get("/requestTiles");case 2:if(e=t.sent,!e.data.tiles){t.next=23;break}for(A=!0,n=!1,a=void 0,t.prev=7,s=e.data.tiles[Symbol.iterator]();!(A=(i=s.next()).done);A=!0)r=i.value,Ge(r)&&(this.names[r.id]=r.name,c=new Image,c.src=r.image,this.images[r.id]=c);t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](7),n=!0,a=t.t0;case 15:t.prev=15,t.prev=16,A||null==s.return||s.return();case 18:if(t.prev=18,!n){t.next=21;break}throw a;case 21:return t.finish(18);case 22:return t.finish(15);case 23:this.loaded=!0;case 24:case"end":return t.stop()}}),t,this,[[7,11,15,23],[16,,18,22]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"getName",value:function(t){return this.names[t]}},{key:"getImage",value:function(t){return this.images[t]}},{key:"hasLoaded",value:function(){return this.loaded}}]),t}(),qe=function(){function t(){Object(i["a"])(this,t)}return Object(O["a"])(t,null,[{key:"CreateThumbnail",value:function(e,A,n,a){t.Canvas||(t.Canvas=document.createElement("canvas")),t.Canvas.width=e,t.Canvas.height=A;var s=t.Canvas.getContext("2d");if(s){for(var i=e/n.width,r=A/n.height,c=0;c<n.height;c++)for(var o=0;o<n.width;o++){var u=Ut(n,o,c),h=a.getImage(u);s.drawImage(h,i*o,r*c,i,r)}return t.Canvas.toDataURL()}return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAsTAAALEwEAmpwYAAABcVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATWVroAAAAenRSTlMAAQIDBAUGBwgJCwwNDxAREhQVFhcZGhseHyAhIiUmJygtLzA1Nzg9P0FGSEpQUlRbXF9lZ2hqbnFzdXZ8foCDiYqMjo+VlpecoKKpq62us7W3uL2+wMPHyczP0NHU1dbY3N3e4OLj5Obo6ert7u/y8/X29/n6+/z9/l5G4FoAAAInSURBVHja7dxXVxRBEIbhWlfEJRhACYJiQEAFBCQZAROyJhQURdRdSSaQpLj167mnLmUGqny/H1A9z/Q53VOn57TInub0J000klIaixoCcm5RQ0AufNMQkNafGgLS/ktDQK6uawhI15aGgPT80RCQG381BGRYNQTkrsaAjGkISOaRhoBkJxIeMiVI2TMNATk6qSEgldMaAnJsRkNAamY1BKTus4aAnPmiISAtS7ufvOQScvG7mYIBj5DLK8YxJA4hHWvGcUscQq5tGMcdcQjptu35iDiE9G4bx6g4hPSXjOOhOITctFvfY3EIuWcdTzIOIfetI39I3EEy49bxNCvuINm8dbw4LO4gR55bx8sycQfJvbKO1+XiDlL1xjqmcuIOcvyddbytEHeQ2jnrmKkSd5D6gnW8rxZ3kOZ56/hwQtxBzi9bx8eT4g5y6Yd1FE6JO0jbqnUU68Qd5Iptz3WhQdxBOjetY6lJ3EGu/7aOr2fFHaRve/8Pyfai6mBJQ0BuH4hjy3+vOqIxIA80CESBAAECBAgQIKn9JwUECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAOaBvAggQIECAAAECBAgQIECAAPl/IYmOBQQIECBAgAABAgQIECBAgAAB4hCyD5cqAQECBAgQIECAAAHCZzwQIECAAAECBAgQIECcQJJthYAAAQLEFyTFtR0IECBAgJDY2QGtwG+USmY7swAAAABJRU5ErkJggg=="}}]),t}();n["a"].use($e["b"]);var Ne=new Ye;Ne.init();var ze=new $e["a"]({state:{welcomeMessage:!1,currentMap:Gt(),tiles:Ne,selected:0},mutations:{},actions:{saveMap:function(t){console.log("Saving map...");var e=t.state.currentMap,A=t.state.tiles,n=qe.CreateThumbnail(200,200,e,A);e.thumbnail=n,ut.a.post("/saveMap",{map:e})}},modules:{}}),Ke=A("f309");n["a"].use(Ke["a"]);var Ve=new Ke["a"]({});n["a"].config.productionTip=!1,new n["a"]({router:Ue,store:ze,vuetify:Ve,render:function(t){return t(b)}}).$mount("#app")},d1f0:function(t,e,A){"use strict";var n=A("a1a2"),a=A.n(n);a.a},d3a8:function(t,e,A){},fdc0:function(t,e,A){}});
//# sourceMappingURL=app.0d84982c.js.map